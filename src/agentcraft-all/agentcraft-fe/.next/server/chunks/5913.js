exports.id=5913,exports.ids=[5913],exports.modules={5503:e=>{e.exports={"nav-bottom-config":"navbar_nav-bottom-config__AR0Ws",git:"navbar_git__0vqQ7"}},2245:e=>{e.exports={header:"chat_header__VWxC8",apptitle:"chat_apptitle__h4HxA",appdescription:"chat_appdescription__S4VJ2",system_avatar:"chat_system_avatar__8uihh",user_avatar:"chat_user_avatar__ZC4q5",link:"chat_link__cHsqI",cloudform:"chat_cloudform__p8MRC",textarea:"chat_textarea__hX3EY",generatebutton:"chat_generatebutton__boP1r",loadingwheel:"chat_loadingwheel__ORa7s",svgicon:"chat_svgicon__GV7A3",messagelist:"chat_messagelist__hLpRC",messagelistloading:"chat_messagelistloading__FFqFj",usermessage:"chat_usermessage__WAVla",usermessagewaiting:"chat_usermessagewaiting__JgwGS",apimessage:"chat_apimessage__GObd3",fadein:"chat_fadein__f0UWS",markdownanswer:"chat_markdownanswer__FfX0F",boticon:"chat_boticon__l05id",usericon:"chat_usericon__MMDz8",center:"chat_center__dwuF_",cloud:"chat_cloud__VQDts",pointsnormal:"chat_pointsnormal__ATDXq",pointsdim:"chat_pointsdim__5sIJS",footer:"chat_footer__4lRli","code-container":"chat_code-container__cr3x8","copy-btn":"chat_copy-btn__dvwfl","feedback-container":"chat_feedback-container__Bo_Ca","chat-container":"chat_chat-container__99A5m","loading-gradient":"chat_loading-gradient__Q2E1C"}},9287:e=>{e.exports={"agentcraft-header":"header_agentcraft-header__1Dsx9",user:"header_user__Hh_nv","user-content":"header_user-content__du6BB",logout:"header_logout__pV591"}},8413:(e,t,a)=>{"use strict";a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var i=a(997);a(6689);var n=a(727),s=a(4794);let r={dark:s.vscDarkPlus,light:s.vs},__WEBPACK_DEFAULT_EXPORT__=e=>{let{textContent:t,darkMode:a,language:s="txt"}=e;return i.jsx(n.Prism,{style:r.dark,language:s,PreTag:"div",children:String(t).replace(/\n$/,"")})}},3274:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var n=a(997),s=a(6689),r=a(3135),o=a(8413),c=a(9832),l=a(7984),d=a(9521),p=a(1871),g=a(4921),m=a(6809),h=a(914),u=a(2245),x=a.n(u),_=e([r,c,l,d,p,g,m]);[r,c,l,d,p,g,m]=_.then?(await _)():_;let __WEBPACK_DEFAULT_EXPORT__=e=>{let{textContent:t,darkMode:a,value:i}=e,[u,_]=(0,s.useState)(!1),copy2Clipboard=async e=>{try{await navigator.clipboard.writeText(e)}catch(a){let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){console.log(e)}document.body.removeChild(t)}h.notifications.show({title:"复制成功",message:"您已完成复制",color:"green"})};return n.jsx(r.default,{linkTarget:"_blank",className:"markdown-body",rehypePlugins:[d.default,p.default,[g.default,{detect:!1,ignoreMissing:!0}]],remarkPlugins:[c.default,m.default,l.default],components:{code({node:e,inline:r,className:c,children:l,...d}){let p=/language-(\w+)/.exec(c||"");return!r&&p?(0,n.jsxs)("div",{className:x()["code-container"],onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:[n.jsx("button",{className:x()["copy-btn"],style:{visibility:u?"visible":"hidden"},onClick:()=>copy2Clipboard(i||t),children:"复制"}),n.jsx(s.Suspense,{children:n.jsx(o.Z,{darkMode:a,language:p[1],...d,textContent:String(l).replace(/\n$/,"")})})]}):n.jsx("code",{className:c,...d,children:l})}},children:t})};i()}catch(e){i(e)}})},6384:(e,t,a)=>{"use strict";a.d(t,{Go:()=>r,c3:()=>s,tc:()=>n,yC:()=>i});let i="agentcraft-fm-qwen-biz",n="AgentCraft_FM",s={[i]:"通义千问商业版","agentcraft-fm-chatglm2-opensource":"Chatglm2-6b开源","agentcraft-fm-chatglm3-opensource":"Chatglm3-6b开源","agentcraft-fm-llama2-opensource":"Llama2-13B（int4量化）开源","agentcraft-fm-qwen-opensource":"通义千问-7b开源"},r=[{name:"通义千问（商业模型）",tag:["阿里云","通义千问"],type:"llm",icon:"https://img.alicdn.com/imgextra/i4/O1CN01c26iB51UyR3MKMFvk_!!6000000002586-2-tps-124-122.png",description:"商业版本的通义千问，支持8K上下文，性能强劲，推理能力强",fcLink:"https://fcnext.console.aliyun.com/applications/create?template=fc-qwen",githubLink:"",template:"agentcraft-fm-qwen-biz",templateParams:{type:"object",additionalProperties:!1,required:["region","apiKey","model"],properties:{region:{type:"string",title:"地域",default:"cn-hangzhou",description:"该服务所在的地域",enum:["cn-beijing","cn-hangzhou","cn-shanghai","cn-shenzhen"],uiType:"select",dataSource:[{label:"杭州",value:"cn-hangzhou"},{label:"上海",value:"cn-shanghai"},{label:"北京",value:"cn-beijing"},{label:"深圳",value:"cn-shenzhen"}]},apiKey:{type:"string",title:"通义千问API-Key",description:'通义千问的API-KEY，<a href="https://dashscope.console.aliyun.com/apiKey" target="_blank">免费申领地址</a>',default:"",uiType:"password"},model:{type:"string",title:"通义千问可访问模型",description:'通义千问支持的两种模型，<a href="https://help.aliyun.com/zh/dashscope/developer-reference/api-details?disableWebsiteRedirect=true" target="_blank">点击查看详情</a>',default:"qwen-turbo",enum:["qwen-turbo","qwen-plus"],uiType:"select",dataSource:[{label:"qwen-turbo",value:"qwen-turbo"},{label:"qwen-plus",value:"qwen-plus"}]},serviceName:{type:"string",title:"服务名",description:"",hiddenUI:!0,default:"AgentCraft"},clientPassword:{type:"string",title:"客户端访问密码",description:"",hiddenUI:!0,default:""}}}}]},6105:(e,t,a)=>{"use strict";a.d(t,{Gf:()=>d,NH:()=>l,T9:()=>c,cl:()=>p,cy:()=>n,hE:()=>i,t5:()=>s,tb:()=>r,yp:()=>o});let i=640,n=1280,s=600,r=6e4,o="agent_craft_token",c="agent_craft_systemconfig_completed",l="agentcraft-quick-start",d="已知信息：【{context}】。你需要积极，简洁和专业地来回答```中的问题。如果问题和已知信息没有关系，或者问题存在争议性，请说 “抱歉，无法回答该问题”，不允许编造。问题是：```{query}```",p=`你是领域有文档的专家，能够将文档内容更有价值的展示给用户，在你输出文档的时候尽量以富内容的形式展示，比如
你的内容是图片url，你应该输出![image](图片url);
你的内容是视频url，你的输出应当是<video width="320" height="240" controls src="视频url"/>;
如果你的信息中包含像 <标签名 /> 这类内容，直接输出就好。`},7387:(e,t,a)=>{"use strict";a.d(t,{As:()=>s,OC:()=>n,TM:()=>r,Xz:()=>i,g9:()=>o});let i="SYSTEM_AGPENTCRAFT",n="AgentCraftService",s="AgentCraftFunction",r="fc-embedding-api",o=`# 数据库获取实践教程



## 数据库资源领取 （5分钟）

新用户建议先领取免费额度，[点击进入freetair](//free.aliyun.com/?product=9564560&crowd=personal&spm=5176.28055625.J_4VYgf18xNlTAyFFbOuOQe.173.e939154aVMAc9G&scm=20140722.M_9489724._.V_1)

**选择”RDS\xa0PostgreSQL\xa0Serverless“**

![image](//img.alicdn.com/imgextra/i4/O1CN01KIbxFu1MIHkEEpUDj_!!6000000001411-0-tps-3498-1828.jpg)

老用户可以访问[快速创建](//rdsbuy.console.aliyun.com/create/rds_serverless_public_cn/PostgreSQL)
## 数据库创建

### 创建数据库实例\xa0
#### 注意这里是Postgresql Serverless类型
![image](//img.alicdn.com/imgextra/i1/O1CN01Xgn67Q1ZQbwxhzzOB_!!6000000003189-0-tps-1678-1842.jpg)

### 注意：
+ 创建vpc的时候最好保持跟当前服务的vpc一致
+ 如果没找到一致的vpc(函数计算的可用区跟数据库的可用区不完全一致)，可以选择默认的vpc，然后数据库开放公网访问进行测试，后续可以在函数计算服务修改vpc

在您初始化系统的时候我们会为您在 可用区 J 创建一个vswitch
### 以下是当前服务的vpc信息
+ **vpcName是:{{vpcName}}**
+ **vpcId是:{{vpcId}}** 
+ **交换机的名称是: agentcraft-vpc** 
+ **选择的可用区是: J**


![image](//img.alicdn.com/imgextra/i3/O1CN01pjv4jx1zpVUMJjZ7l_!!6000000006763-0-tps-1668-1852.jpg)

![image](//img.alicdn.com/imgextra/i3/O1CN01qVaFvT1ZB2Tysrgu1_!!6000000003155-0-tps-3540-1842.jpg)

进入控制台等待实例启动\xa0

![image](//img.alicdn.com/imgextra/i2/O1CN015UrP3y28SuUMmjbMf_!!6000000007932-0-tps-3558-1722.jpg)

### 创建数据库\xa0

![image](//img.alicdn.com/imgextra/i4/O1CN01OOS1QR1zJuA4P2KLC_!!6000000006694-0-tps-3522-1422.jpg)

![image](//img.alicdn.com/imgextra/i1/O1CN01MCvyQV1J6t2c4oRlH_!!6000000000980-0-tps-3542-1850.jpg)

![image](//img.alicdn.com/imgextra/i3/O1CN01d2lsUT27wOMsvnbPa_!!6000000007861-0-tps-3502-1226.jpg)

### 创建管理账号

![image](//img.alicdn.com/imgextra/i3/O1CN01cEewJA28vlRUoSK6V_!!6000000007995-0-tps-3466-1450.jpg)

注意选择高权限账号

![image](//img.alicdn.com/imgextra/i1/O1CN012WgalA1kLXKoqWmiu_!!6000000004667-0-tps-3380-1642.jpg)

### 数据库连接测试

![image](//img.alicdn.com/imgextra/i3/O1CN01pD2lR626rywIkw6Eu_!!6000000007716-0-tps-3514-1158.jpg)

![image](//img.alicdn.com/imgextra/i4/O1CN01YPNEZC1Ddxx3r0ch9_!!6000000000240-0-tps-3468-1716.jpg)

![image](//img.alicdn.com/imgextra/i1/O1CN01FBkzpE253lu5Zi4xN_!!6000000007471-0-tps-2758-1550.jpg)

### 开通vector插件，并且准备好配置项

![image](//img.alicdn.com/imgextra/i2/O1CN01LgKO1J244OpZ7Tdm4_!!6000000007337-0-tps-3536-1728.jpg)

## 最终配置

### 数据库连接地址 

![image](//img.alicdn.com/imgextra/i2/O1CN01FWVxkg1yVyzP5ZxrG_!!6000000006585-0-tps-1476-432.jpg)

![image](//img.alicdn.com/imgextra/i4/O1CN01WVXB3K205zkJxWzGs_!!6000000006799-0-tps-3546-990.jpg)

### 数据库名

![image](//img.alicdn.com/imgextra/i4/O1CN01Ra3bpd21J6hegBqfz_!!6000000006963-0-tps-3514-454.jpg)

### 数据库账号 

_上面设置的高权限账号_

### 数据库密码 

_上面设置的高权限账号密码_`},3448:(e,t,a)=>{"use strict";a.d(t,{Z:()=>CompleteConfirm});var i=a(997);a(6689);var n=a(2247),s=a(5288);function CompleteConfirm({embeddingServiceForm:e,databaseForm:t}){let a=e.values,r=t.values,{EMBEDDING_DIM:o,EMBEDDING_URL:c}=a,{POSTGRES_HOST:l,POSTGRES_DATABASE:d,POSTGRES_USER:p,POSTGRES_PASSWORD:g}=r;return(0,i.jsxs)(n.Paper,{shadow:"xs",p:"xl",children:[i.jsx(n.Title,{order:5,size:"h5",children:"向量服务配置"}),(0,i.jsxs)(n.Box,{pl:4,pr:4,children:[(0,i.jsxs)(n.Group,{grow:!0,children:[i.jsx(n.Text,{children:"向量维度："}),i.jsx(n.Text,{children:o})]}),(0,i.jsxs)(n.Group,{grow:!0,children:[i.jsx(n.Text,{children:"embedding服务地址："}),i.jsx(n.Text,{children:c})]})]}),i.jsx(n.Divider,{my:"sm"}),i.jsx(n.Title,{order:5,size:"h5",children:"数据库配置"}),(0,i.jsxs)(n.Box,{pl:4,pr:4,children:[(0,i.jsxs)(n.Group,{grow:!0,children:[i.jsx(n.Text,{children:"数据库地址："}),i.jsx(n.Text,{children:l})]}),(0,i.jsxs)(n.Group,{grow:!0,children:[i.jsx(n.Text,{children:"数据库账号："}),i.jsx(n.Text,{children:d})]}),(0,i.jsxs)(n.Group,{grow:!0,children:[i.jsx(n.Text,{children:"数据库用户名："}),i.jsx(n.Text,{children:p})]}),(0,i.jsxs)(n.Group,{grow:!0,children:[i.jsx(n.Text,{children:"数据库密码："}),i.jsx(n.Text,{children:(0,s.Ti)(g)})]})]})]})}},5015:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{Z:()=>DataBaseConfig});var n=a(997);a(6689);var s=a(32),r=a(2247),o=a(3274),c=a(7387),l=a(7472),d=e([o,l]);function DataBaseConfig({form:e}){let[t,{open:a,close:i}]=(0,s.useDisclosure)(!1),d=(0,l.Po)().completeConfig,p=d?.vpcInfo||{};return(0,n.jsxs)(r.Paper,{shadow:"xs",p:"xl",children:[n.jsx(r.Drawer,{opened:t,onClose:i,title:"获取阿里云Postgresql Serverless版教程",position:"right",size:"50%",children:n.jsx("div",{style:{width:window.innerWidth/2-40},children:n.jsx(o.Z,{textContent:function(e,{vpcId:t="",vpcName:a=""}){return e.replace(/{{vpcId}}/g,t).replace(/{{vpcName}}/g,a)}(c.g9,p)})})}),n.jsx("div",{children:(0,n.jsxs)(r.Text,{weight:700,children:["还没有数据库？ ",n.jsx(r.Button,{onClick:a,variant:"subtle",children:"查看如何免费获取"})]})}),n.jsx(r.TextInput,{withAsterisk:!0,label:"数据库地址",description:"请输入数据库访问地址",placeholder:"示例: mxlpo.pg.rds.aliyuncs.com",...e.getInputProps("POSTGRES_HOST")}),n.jsx(r.TextInput,{withAsterisk:!0,label:"数据库名称",description:"请输入数据库名称",placeholder:"",...e.getInputProps("POSTGRES_DATABASE")}),n.jsx(r.TextInput,{withAsterisk:!0,label:"数据库访问用户名",description:"请输入数据库访问用户名",placeholder:"",...e.getInputProps("POSTGRES_USER")}),n.jsx(r.PasswordInput,{withAsterisk:!0,label:"数据库访问密码",description:"请输入数据库访问密码",placeholder:"",...e.getInputProps("POSTGRES_PASSWORD")})]})}[o,l]=d.then?(await d)():d,i()}catch(e){i(e)}})},8330:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{Z:()=>EmbeddingConfig});var n=a(997);a(6689);var s=a(5611),r=a(1280),o=a(2247),c=a(8159),l=a(7387),d=a(7472),p=e([s,c,d]);function LoadingStepper(){let e=(0,c.bQ)().appStatus,t=(0,c.bQ)().appName;return(0,n.jsxs)("div",{children:[(0,n.jsxs)(o.Flex,{align:"center",children:[n.jsx("span",{children:"创建Embedding服务预计需要1~2分钟，请耐心等待。"})," ",n.jsx(o.Anchor,{href:`https://fcnext.console.aliyun.com/applications/${t}/env/default?tab=envDetail`,target:"_blank",children:"点击查看服务部署信息"})]}),(0,n.jsxs)(o.Stepper,{active:e,breakpoint:"sm",mt:12,children:[n.jsx(o.Stepper.Step,{label:"初始化",description:""}),n.jsx(o.Stepper.Step,{label:"创建中",description:"",loading:e===c.FR.CREATING}),n.jsx(o.Stepper.Step,{label:"创建成功/失败",description:""})]})]})}function EmbeddingConfig({form:e}){let t=(0,c.bQ)().setCreateLoading,a=(0,c.bQ)().createLoading,i=(0,c.bQ)().setAppStatus,p=(0,d.Po)().completeConfig,g=(0,c.bQ)().setAppName;async function createEmbeddingService(){let a=`该操作会使用《阿里云函数计算服务》进行Embedding服务的创建，确认创建吗？`;r.modals.openConfirmModal({title:"创建函数计算Embedding服务",centered:!0,children:(0,n.jsxs)("div",{children:[n.jsx(o.Text,{size:"sm",children:a}),(0,n.jsxs)(o.Flex,{align:"center",children:[n.jsx("span",{children:"注意该服务需要依赖NAS服务以存储模型"})," ",n.jsx(o.Anchor,{href:"https://nasnext.console.aliyun.com/introduction",target:"_blank",children:"NAS服务地址"})]})]}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),onConfirm:async()=>{let a=l.TM,n={region:p.regionId||"cn-hangzhou",serviceName:l.OC,functionName:`${l.As}_${(0,s.nanoid)()}`,description:"Embedding算法服务【作为AgentCraft服务的核心依赖，请谨慎删除】"};try{t(!0),i(c.FR.INIT),n.name=`${l.Xz}_${(0,s.nanoid)()}`;let r=await (0,c.iO)(a,n),o=r.name;g(o);let d=await new Promise((e,t)=>{i(c.FR.CREATING);let a=setInterval(async()=>{try{let t=await (0,c.Yo)(o),n=t.lastRelease;"published"===n.status&&(clearInterval(a),i(c.FR.SUCCESS),e(n))}catch(e){}},4e3)}),p=d?.output?.deploy["embedding-service"],m=p?.customDomains[0]?.domainName,h=`http://${m}/embedding`;e.setValues({EMBEDDING_URL:h})}catch(e){console.log(e)}t(!1)}})}return(0,n.jsxs)(o.Paper,{shadow:"xs",p:"xl",children:[n.jsx(o.LoadingOverlay,{loader:n.jsx(LoadingStepper,{}),visible:a,overlayOpacity:.8,overlayBlur:2}),n.jsx(o.TextInput,{withAsterisk:!0,label:"向量维度",description:"向量的维度设置，跟使用embedding算法相关，并且在数据库持久化的时候不能修改",defaultValue:"1024",placeholder:"",...e.getInputProps("EMBEDDING_DIM")}),(0,n.jsxs)(o.Flex,{align:"center",children:[n.jsx(o.TextInput,{withAsterisk:!0,label:"embedding服务访问地址",description:"AgentCraft需要访问embedding服务地址，进行上下文的向量化处理",style:{width:"85%"},...e.getInputProps("EMBEDDING_URL"),defaultValue:p.EMBEDDING_URL||""})," ",n.jsx(o.Button,{variant:"subtle",mt:42,ml:4,onClick:createEmbeddingService,children:"快速获取embedding服务"})]})]})}[s,c,d]=p.then?(await p)():p,i()}catch(e){i(e)}})},6608:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{T:()=>SystemConfig});var n,s=a(997),r=a(6689),o=a(1163),c=a(1280),l=a(9445),d=a(914),p=a(2247),g=a(8330),m=a(5015),h=a(3448),u=a(7472),x=e([g,m,u]);function SystemConfig(){let e=(0,o.useRouter)(),[t,a]=(0,r.useState)(!1),i=(0,u.Po)().setHiddenConfigView,n=(0,u.Po)().embeddingConfig,x=(0,u.Po)().databaseConfig,_=(0,u.Po)().setEmbeddingConfig,f=(0,u.Po)().setDatabaseConfig,v=(0,u.Po)().activeStep,j=(0,u.Po)().setActiveStep,b=(0,l.useForm)({initialValues:n,validate:{EMBEDDING_DIM:e=>e?null:"向量维度必填",EMBEDDING_URL:e=>/^(http|https):\/\/[^ "]+$/.test(e)?null:"请输入正确的URL地址"}}),C=(0,l.useForm)({initialValues:x,validate:{POSTGRES_HOST:e=>e?null:"数据库地址必填",POSTGRES_DATABASE:e=>e?null:"数据库名称必填",POSTGRES_USER:e=>e?null:"数据库用户名必填",POSTGRES_PASSWORD:e=>e?null:"数据库密码必填"}});return(0,s.jsxs)(p.Paper,{shadow:"xs",p:"xl",style:{width:"60%",margin:"0 auto"},children:[s.jsx(p.LoadingOverlay,{visible:t}),s.jsx(p.Notification,{title:"系统配置",mb:148,withCloseButton:!1,radius:"xs",children:"在进行系统操作前，您需要准备好embedding服务，以及数据库服务，AgentCraft提供了引导式的配置服务，帮助您快速完成系统配置"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(p.Stepper,{active:v,onStepClick:j,children:[s.jsx(p.Stepper.Step,{label:"配置Embedding服务",description:"配置向量服务",children:s.jsx(g.Z,{form:b})}),s.jsx(p.Stepper.Step,{label:"配置数据库",description:"进行关系型数据库和向量数据库配置",children:s.jsx(m.Z,{form:C})}),s.jsx(p.Stepper.Completed,{children:s.jsx(h.Z,{embeddingServiceForm:b,databaseForm:C})})]}),(0,s.jsxs)(p.Group,{mt:"xl",pl:24,children:[v>0&&s.jsx(p.Button,{variant:"default",onClick:()=>{let e=v>0?v-1:v;j(e)},children:"上一步"}),2===v?s.jsx(p.Button,{onClick:function(){let t=`确定进行服务配置更新吗？`;c.modals.openConfirmModal({title:"更新系统配置",centered:!0,children:s.jsx(p.Text,{size:"sm",children:t}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),onConfirm:async()=>{a(!0);try{let t=await (0,u.w1)({...n,...x});200===t.code?(i(!0),d.notifications.show({title:"恭喜配置成功",message:"您已完成配置，请前往注册",color:"green"}),e.push("/register")):d.notifications.show({title:"系统异常",message:t.error,color:"red"})}catch(e){d.notifications.show({title:"系统异常",message:e.message,color:"red"})}a(!1)}})},children:"完成"}):s.jsx(p.Button,{onClick:()=>{if(0===v){if(b.validate(),!b.isValid())return;_(b.values)}if(1===v){if(C.validate(),!C.isValid())return;f(C.values)}let e=v<3?v+1:v;j(e)},children:"下一步"})]})]})]})}[g,m,u]=x.then?(await x)():x,function(e){e[e.EMBEDDING_SERVICE=0]="EMBEDDING_SERVICE",e[e.DATABASE=1]="DATABASE",e[e.COMPLETE=2]="COMPLETE"}(n||(n={})),i()}catch(e){i(e)}})},2578:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{h:()=>Header});var n=a(997),s=a(2247),r=a(1280),o=a(839),c=a(1163),l=a(8986),d=a(9287),p=a.n(d),g=a(6689),m=e([o,l]);function Header(){let e=(0,o.L)().userInfo,t=(0,l.O_)().setToken,a=(0,c.useRouter)();return(0,g.useEffect)(()=>{e.username||(0,o.b)()},[]),n.jsx(s.Header,{height:60,p:"xs",children:(0,n.jsxs)("div",{className:p()["agentcraft-header"],children:[n.jsx(s.Box,{ml:5,children:n.jsx("a",{href:"https://github.com/devsapp/agentcraft",target:"_blank",children:n.jsx(s.Flex,{align:"center",children:n.jsx(s.Anchor,{href:"https://agentcraft.serverless-developer.com/",color:"white",target:"_blank",mr:24,children:"访问官网"})})})}),e.username?(0,n.jsxs)("div",{className:p().user,children:[(0,n.jsxs)("div",{className:p()["user-content"],children:["您好：",e.username]}),n.jsx("a",{className:p().logout,onClick:()=>{r.modals.openConfirmModal({title:"登出确认",centered:!0,children:n.jsx(s.Text,{size:"sm",children:"确定退出本次登录么？"}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),onConfirm:()=>{t(""),a.push("/login")}})},children:"登出"})]}):null]})})}[o,l]=m.then?(await m)():m,i()}catch(e){i(e)}})},5342:(e,t,a)=>{"use strict";a.d(t,{J:()=>Nav});var i=a(997),n=a(1163),s=a(2247),r=a(4173),o=a(2629),c=a(9502),l=a(3070),d=a(4103),p=a(9257),g=a(4017),m=a(1261),h=a(3453),u=a(5503),x=a.n(u);let flattenNavItems=(e,t,a="",i=0)=>(i++,t.reduce((e,t)=>{let n=t.path;return t.parentPath=a,t.level=i,e[n]=t,t.subNav?e=flattenNavItems(e,t.subNav,`${n}`,i):e[n]=t,e},e)),Nav=()=>{let e=(0,n.useRouter)(),{pathname:t,query:a}=e,u=a.id,_=a.knowledgeBaseId,handleClick=t=>{e.push(`${t.replace("[id]",u).replace("[knowledgeBaseId]",_)}`)},f=[{name:"概览",path:"/overview",icon:i.jsx(o.Z,{size:"1rem",stroke:1.5})},{name:"应用",path:"/app",icon:i.jsx(c.Z,{size:"1rem",stroke:1.5}),subNav:[{name:"领域知识智能体",path:"/app/[id]/knowledgeBase",icon:i.jsx(l.Z,{size:"1rem",stroke:1.5}),subNav:[{name:"智能体信息",path:"/app/[id]/knowledgeBase/[knowledgeBaseId]/detail",icon:i.jsx(o.Z,{size:"1rem",stroke:1.5})},{name:"智能体解答记录",path:"/app/[id]/knowledgeBase/[knowledgeBaseId]/chatlist",icon:i.jsx(o.Z,{size:"1rem",stroke:1.5})}]}]},{name:"数据集",path:"/dataset",icon:i.jsx(d.Z,{size:"1rem",stroke:1.5}),subNav:[{name:"数据源",path:"/dataset/[id]/datasource",icon:i.jsx(o.Z,{size:"1rem",stroke:1.5})}]},{name:"LLM代理",path:"/model",icon:i.jsx(p.Z,{size:"1rem",stroke:1.5})},{path:"/divider1",type:"divider"},{name:"基础模型",path:"/foundationModel",icon:i.jsx(g.Z,{size:"1rem",stroke:1.5}),subNav:[{name:"创建基础模型",path:"/foundationModel/create",solo:!0,icon:i.jsx(o.Z,{size:"1rem",stroke:1.5})},{name:"基础模型详细",solo:!0,path:"/foundationModel/[fmId]/detail",icon:i.jsx(o.Z,{size:"1rem",stroke:1.5})}]},{path:"/divider2",type:"divider"},{name:"客户端接入",path:"/clientAccess",icon:i.jsx(m.Z,{size:"1rem",stroke:1.5}),subNav:[{name:"创建客户端接入服务",path:"/clientAccess/create",solo:!0,icon:i.jsx(o.Z,{size:"1rem",stroke:1.5})},{name:"创建机器人服务",path:"/clientAccess/robot",solo:!0,icon:i.jsx(o.Z,{size:"1rem",stroke:1.5})},{name:"创建web独立站服务",path:"/clientAccess/web",solo:!0,icon:i.jsx(o.Z,{size:"1rem",stroke:1.5})}]}],v=flattenNavItems({},f),j=v[t]||{},b=[];return b=j.solo?[j]:Object.keys(v).filter(e=>{let t=v[e];return t.level===j.level&&t.parentPath===j.parentPath}).map(e=>v[e]),(0,i.jsxs)(s.Navbar,{className:"navbar",width:{base:240},p:"xs",children:[j.parentPath?i.jsx(s.Center,{h:40,mx:"auto",children:i.jsx(s.ActionIcon,{onClick:()=>{let t=j.parentPath?.replace("[id]",u).replace("[knowledgeBaseId]",_)||"";e.push(t)},children:i.jsx(h.Z,{})})}):null,b.map(e=>"divider"===e.type?i.jsx(s.Divider,{mt:8,mb:8},e.path):i.jsx(s.NavLink,{label:e.name,icon:e.icon,variant:"filled",onClick:()=>handleClick(e.path),active:t===e.path},e.path)),i.jsx("div",{className:x()["nav-bottom-config"],children:i.jsx(r.Z,{color:"white",className:x().git})})]})}},3672:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{N:()=>Shell});var n=a(997),s=a(1163),r=a(2247),o=a(5342),c=a(2578);a(6689);var l=e([c]);function Shell(e){let t=(0,s.useRouter)(),{pathname:a}=t,i=-1===a.indexOf("login")&&-1===a.indexOf("register")&&-1===a.indexOf("config");return n.jsx(n.Fragment,{children:i?n.jsx(r.AppShell,{padding:"md",navbar:n.jsx(o.J,{}),header:n.jsx(c.h,{}),styles:e=>({main:{backgroundColor:"dark"===e.colorScheme?e.colors.dark[8]:e.colors.gray[0]}}),children:n.jsx("div",{children:e.children})}):n.jsx(n.Fragment,{children:e.children})})}c=(l.then?(await l)():l)[0],i()}catch(e){i(e)}})},5913:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.r(t),a.d(t,{default:()=>App});var n=a(997),s=a(6689),r=a(968),o=a.n(r),c=a(2247),l=a(1280),d=a(914),p=a(3672),g=a(7472),m=a(6608);a(291),a(3396);var h=e([p,g,m]);function App(e){let{Component:t,pageProps:a}=e,[i,r]=(0,s.useState)(!1),h=(0,g.Po)().hiddenConfigView;return(0,s.useEffect)(()=>{r(!0),(0,g.kH)()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o(),{children:[n.jsx("title",{children:"AgentCraft"}),n.jsx("link",{rel:"shortcut icon",href:"/favicon.ico"}),n.jsx("meta",{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width"})]}),(0,n.jsxs)(c.MantineProvider,{withGlobalStyles:!0,withNormalizeCSS:!0,theme:{colorScheme:"dark"},children:[n.jsx(d.Notifications,{}),i?(0,n.jsxs)(l.ModalsProvider,{children:[h?n.jsx(p.N,{children:n.jsx(t,{...a})}):n.jsx(m.T,{}),"."]}):null]})]})}[p,g,m]=h.then?(await h)():h,i()}catch(e){i(e)}})},8986:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{O_:()=>l,x4:()=>login,z2:()=>register});var n=a(9890),s=a(3602),r=a(2393),o=a(6105),c=e([n,s,r]);[n,s,r]=c.then?(await c)():c;let l=(0,n.create)((0,s.persist)(e=>({token:"",setToken:t=>e({token:t})}),{name:o.yp}));async function login(e,t){let a=await (0,r.W)("/api/authentication/login",{method:"POST",body:JSON.stringify({username:e,password:t}),headers:{"Content-Type":"application/json"}});return a}async function register(e,t){let a=await (0,r.W)("/api/authentication/register",{method:"POST",body:JSON.stringify({username:e,password:t}),headers:{"Content-Type":"application/json"}});return a}i()}catch(e){i(e)}})},8159:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{FR:()=>n,Yo:()=>getFoundationModel,bQ:()=>d,ff:()=>deleteFoundationModel,iO:()=>addFoundationModel,im:()=>getFoundationModelList});var n,s=a(9890),r=a(3602),o=a(2393),c=a(6384),l=e([s,r,o]);[s,r,o]=l.then?(await l)():l,function(e){e[e.INIT=1]="INIT",e[e.CREATING=2]="CREATING",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"}(n||(n={}));let d=(0,s.create)()((0,r.devtools)(e=>({foundationModelList:[],loading:!1,createLoading:!1,open:!1,fmTemplate:{},appName:"",appStatus:1,currentFoundationModel:{},setCurrentFoundationModel:t=>e(e=>({currentFoundationModel:t})),setAppStatus:t=>e(e=>({appStatus:t})),setFmTemplate:t=>e(e=>({fmTemplate:t})),setAppName:t=>e(e=>({appName:t})),setCreateLoading:t=>e(e=>({createLoading:t})),setLoading:t=>e(e=>({loading:t})),setOpen:t=>e(e=>({open:t})),updateFoundationModelList:t=>e(e=>({foundationModelList:t}))})));async function getFoundationModelList(){let e=d.getState(),t=e.updateFoundationModelList,a=await (0,o.W)(`/api/infra/alibaba-cloud/listApps?appFilter=${c.tc}`),i=a.data;i&&t(i)}async function getFoundationModel(e){let t=await (0,o.W)(`/api/infra/alibaba-cloud/getApp?appName=${e}`);return t.data}async function deleteFoundationModel(e){return await (0,o.W)(`/api/infra/alibaba-cloud/deleteApp?appName=${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})}async function addFoundationModel(e,t){let a=await (0,o.W)(`/api/infra/alibaba-cloud/createApp?template=${e}`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});return a.data}i()}catch(e){i(e)}})},7472:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{Po:()=>d,kH:()=>getSystemConfig,w1:()=>updateSystemConfig});var n,s=a(9890),r=a(3602),o=a(6105),c=a(2393),l=e([s,r,c]);[s,r,c]=l.then?(await l)():l,function(e){e[e.EMBEDDING_SERVICE=0]="EMBEDDING_SERVICE",e[e.DATABASE=1]="DATABASE",e[e.COMPLETE=2]="COMPLETE"}(n||(n={}));let d=(0,s.create)((0,r.persist)(e=>({completeConfig:{},hiddenConfigView:!1,embeddingConfig:{EMBEDDING_DIM:"1024",EMBEDDING_URL:""},databaseConfig:{POSTGRES_HOST:"",POSTGRES_DATABASE:"",POSTGRES_USER:"",POSTGRES_PASSWORD:""},activeStep:0,setHiddenConfigView:t=>e({hiddenConfigView:t}),setEmbeddingConfig:t=>e({embeddingConfig:t}),setDatabaseConfig:t=>e({databaseConfig:t}),setActiveStep:t=>e({activeStep:t}),setCompleteConfig:t=>e({completeConfig:t})}),{name:o.T9}));async function getSystemConfig(){let e=await (0,c.W)("/api/systemConfig/init"),t=d.getState(),a=t.setCompleteConfig,i=t.setHiddenConfigView;a(e?.data||{}),i(!!e?.data?.EMBEDDING_URL)}async function updateSystemConfig(e){return await (0,c.W)("/api/systemConfig/update",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}i()}catch(e){i(e)}})},839:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{L:()=>c,b:()=>getUserInfo});var n=a(9890),s=a(3602),r=a(2393),o=e([n,s,r]);[n,s,r]=o.then?(await o)():o;let c=(0,n.create)()((0,s.devtools)(e=>({userInfo:{username:"",created:""},setUserInfo:t=>e(e=>({userInfo:t}))})));async function getUserInfo(){let e=c.getState(),t=await (0,r.W)("/api/user"),a=await t.data;a&&e.setUserInfo(a)}i()}catch(e){i(e)}})},2074:(e,t,a)=>{"use strict";a.d(t,{M:()=>i});let i={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,CONFLICT:409,GONE:410,UNSUPPORTED_MEDIA_TYPE:415,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504}},2393:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{W:()=>request});var n=a(1163),s=a.n(n),r=a(2074),o=a(8986),c=e([o]);async function request(e,t){let{token:a}=o.O_.getState();t||(t={method:"GET",headers:{"Content-Type":"application/json"}}),a&&(t.headers.Authorization=`Bearer ${a||""}`);let i=await fetch(e,t),n=await i.json();return n.code===r.M.UNAUTHORIZED&&s().push("/login"),n}o=(c.then?(await c)():c)[0],i()}catch(e){i(e)}})},5288:(e,t,a)=>{"use strict";function formatDateTime(e){let t=new Date(e),a=t.getFullYear(),i=(1+t.getMonth()).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),s=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0"),o=t.getSeconds().toString().padStart(2,"0");return`${a}-${i}-${n} ${s}:${r}:${o}`}function obscureString(e){return e?e.replace(/./g,"*"):""}a.d(t,{Ti:()=>obscureString,o0:()=>formatDateTime})},291:()=>{},3396:()=>{}};