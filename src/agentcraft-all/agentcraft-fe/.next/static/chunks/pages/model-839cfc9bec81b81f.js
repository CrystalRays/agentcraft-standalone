(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{95033:function(e,t,r){"use strict";r.d(t,{y:function(){return z}});var n=r(67294),o=r(3241),i=r(48427),l=r(95117),a=(0,r(56817).k)((e,{color:t})=>({root:{backgroundColor:e.fn.themeColor(t,"dark"===e.colorScheme?5:2),color:"dark"===e.colorScheme?e.colors.dark[9]:"inherit"}})),s=r(64523),c=Object.defineProperty,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&u(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&u(e,r,t[r]);return e},m=(e,t)=>{var r={};for(var n in e)h.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))0>t.indexOf(n)&&p.call(e,n)&&(r[n]=e[n]);return r};let g={color:"yellow"},x=(0,n.forwardRef)((e,t)=>{let r=(0,o.N4)("Mark",g,e),{color:i,className:l,unstyled:c,variant:d}=r,h=m(r,["color","className","unstyled","variant"]),{classes:p,cx:u}=a({color:i},{unstyled:c,name:"Mark",variant:d});return n.createElement(s.x,f({component:"mark",ref:t,className:u(p.root,l)},h))});function y(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}x.displayName="@mantine/core/Mark";var b=Object.defineProperty,j=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&k(e,r,t[r]);if(j)for(var r of j(t))v.call(t,r)&&k(e,r,t[r]);return e},S=(e,t)=>{var r={};for(var n in e)w.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&j)for(var n of j(e))0>t.indexOf(n)&&v.call(e,n)&&(r[n]=e[n]);return r};let C={highlightColor:"yellow"},L=(0,n.forwardRef)((e,t)=>{let r=(0,o.N4)("Highlight",C,e),{children:i,highlight:a,highlightColor:s,highlightStyles:c,unstyled:d}=r,h=S(r,["children","highlight","highlightColor","highlightStyles","unstyled"]),p=function(e,t){if(null==t)return[{chunk:e,highlighted:!1}];let r=Array.isArray(t)?t.map(y):y(t),n=Array.isArray(r)?r.filter(e=>e.trim().length>0).length>0:""!==r.trim();if(!n)return[{chunk:e,highlighted:!1}];let o="string"==typeof r?r.trim():r.filter(e=>0!==e.trim().length).map(e=>e.trim()).join("|"),i=RegExp(`(${o})`,"gi"),l=e.split(i).map(e=>({chunk:e,highlighted:i.test(e)})).filter(({chunk:e})=>e);return l}(i,a);return n.createElement(l.x,O({unstyled:d,ref:t,__staticSelector:"Highlight"},h),p.map(({chunk:e,highlighted:t},r)=>t?n.createElement(x,{unstyled:d,key:r,color:s,sx:c,"data-highlight":e},e):n.createElement("span",{key:r},e)))});L.displayName="@mantine/core/Highlight";let z=(0,i.F)(L)},95078:function(e,t,r){"use strict";r.d(t,{i:function(){return P}});var n=r(67294),o=r(3241),i=r(56817),l=r(96768),a=r(14258),s=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))u.call(t,r)&&f(e,r,t[r]);return e},g=(e,t)=>c(e,d(t)),x=(0,i.k)((e,{captionSide:t,horizontalSpacing:r,verticalSpacing:n,fontSize:o,withBorder:i,withColumnBorders:s})=>{let c=`${(0,l.h)(1)} solid ${"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[3]}`;return{root:g(m({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:i?c:void 0,"& caption":{marginTop:"top"===t?0:e.spacing.xs,marginBottom:"bottom"===t?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:"dark"===e.colorScheme?e.colors.dark[0]:e.colors.gray[7],fontSize:(0,a.a)({size:o,sizes:e.fontSizes}),padding:`${(0,a.a)({size:n,sizes:e.spacing})} ${(0,a.a)({size:r,sizes:e.spacing})}`},"& thead tr th":{borderBottom:c},"& tfoot tr th, & tbody tr th":{borderTop:c},"& tbody tr td":{padding:`${(0,a.a)({size:n,sizes:e.spacing})} ${(0,a.a)({size:r,sizes:e.spacing})}`,borderTop:c,fontSize:(0,a.a)({size:o,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:s?c:"none","&:last-of-type":{borderRight:"none",borderLeft:s?c:"none"}},"& tbody tr th":{borderRight:s?c:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[1]})})}}),y=r(64523),b=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&S(e,r,t[r]);if(v)for(var r of v(t))O.call(t,r)&&S(e,r,t[r]);return e},L=(e,t)=>j(e,w(t)),z=(e,t)=>{var r={};for(var n in e)k.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&v)for(var n of v(e))0>t.indexOf(n)&&O.call(e,n)&&(r[n]=e[n]);return r};let E={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},P=(0,n.forwardRef)((e,t)=>{let r=(0,o.N4)("Table",E,e),{className:i,children:l,striped:a,highlightOnHover:s,captionSide:c,horizontalSpacing:d,verticalSpacing:h,fontSize:p,unstyled:u,withBorder:f,withColumnBorders:m,variant:g}=r,b=z(r,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:j,cx:w}=x({captionSide:c,verticalSpacing:h,horizontalSpacing:d,fontSize:p,withBorder:f,withColumnBorders:m},{unstyled:u,name:"Table",variant:g});return n.createElement(y.x,L(C({},b),{component:"table",ref:t,className:w(j.root,i),"data-striped":a||void 0,"data-hover":s||void 0}),l)});P.displayName="@mantine/core/Table"},2065:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/model",function(){return r(89397)}])},30372:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(85893),o=r(67294),i=r(55652),l=r(69876),a=r(95117),s=r(49834),c=r(88198),d=r(93625),h=r(37044),p=r.n(h);function u(e){let{value:t,content:r,truncate:h,width:u=300}=e,f=function(){let{timeout:e=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,r]=(0,o.useState)(null),[n,i]=(0,o.useState)(!1),[l,a]=(0,o.useState)(null),s=t=>{clearTimeout(l),a(setTimeout(()=>i(!1),e)),i(t)},c=e=>{if("clipboard"in navigator)navigator.clipboard.writeText(e).then(()=>s(!0)).catch(e=>r(e));else{let t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-999999px",document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}finally{t.remove(),s(!0)}}},d=()=>{i(!1),r(null),clearTimeout(l)};return{copy:c,reset:d,error:t,copied:n}}({timeout:500});return(0,n.jsx)(i.u,{label:f.copied?"已复制":"复制",withArrow:!0,position:"right",children:(0,n.jsxs)(l.k,{onClick:()=>f.copy(t),mih:50,style:{width:u},gap:"xs",justify:"flex-start",align:"center",direction:"row",wrap:"nowrap",children:[r?(0,n.jsx)(a.x,{truncate:h,className:p()["copy-to-clipboard-content"],children:r}):null,(0,n.jsx)(s.A,{color:f.copied?"teal":"gray",children:f.copied?(0,n.jsx)(c.Z,{size:"1rem"}):(0,n.jsx)(d.Z,{size:"1rem"})})]})})}},3658:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(85893),o=r(92716),i=r(95117),l=r(64523),a=r(69876),s=r(19236),c=r(91759);function d(e){let{detail:t,title:r}=e,[l,{open:a,close:s}]=(0,c.q)(!1);return(0,n.jsx)(n.Fragment,{children:t?(0,n.jsxs)("div",{children:[(0,n.jsx)(o.d,{opened:l,onClose:s,title:r,children:(0,n.jsx)(i.x,{children:t})}),(0,n.jsx)(i.x,{onClick:()=>a(),children:"信息"})]}):null})}function h(e){let{title:t,description:r,detail:o,mt:c,mb:h}=e;return(0,n.jsxs)(l.x,{mt:c||24,mb:h||24,children:[(0,n.jsxs)(a.k,{mih:20,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:[(0,n.jsx)(s.D,{order:2,children:t}),(0,n.jsx)(d,{title:t,detail:o})]}),r?(0,n.jsx)(i.x,{lineClamp:4,children:r}):null]})}},89397:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return z}});var n=r(85893),o=r(67294),i=r(95117),l=r(95033),a=r(67841),s=r(64523),c=r(49737),d=r(95078),h=r(94491),p=r(80061),u=r(73193),f=r(14127),m=r(52615),g=r(54685),x=r(93284),y=r(77248),b=r(73344),j=r(24350),w=r(48847),v=r(30372),k=r(61407),O=r(3658);function S(){let e=(0,j.s6)().modelList,t=(0,j.s6)().loading,r=(0,j.s6)().setLoading,h=(0,j.s6)().setOpen,p=(0,j.s6)().setEditStatus,u=(0,j.s6)().updateCurrentModel,f=e=>{let{id:t,name:o}=e;b.qk.openConfirmModal({title:"删除LLM代理",centered:!0,children:(0,n.jsx)(i.x,{size:"sm",children:(0,n.jsx)(l.y,{highlight:o,children:"确定删除 ".concat(o,"?")})}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),confirmProps:{color:"red"},onConfirm:async()=>{try{r(!0),await (0,j.$s)(t),await (0,j.fZ)()}catch(e){console.log(e)}finally{r(!1)}}})},m=async()=>{r(!0),await (0,j.fZ)(),r(!1)},g=e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.name_alias}),(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.description}),(0,n.jsx)("td",{style:{width:450},children:(0,n.jsx)(v.Z,{value:e.url,content:e.url})}),(0,n.jsx)("td",{style:{width:200},children:e.token?(0,n.jsx)(v.Z,{value:e.token,content:"******************",width:100}):null}),(0,n.jsx)("td",{children:(0,w.o0)(e.created)}),(0,n.jsx)("td",{children:(0,w.o0)(e.modified)}),(0,n.jsxs)("td",{style:{width:180},children:[" ",(0,n.jsx)(a.z,{variant:"filled",size:"xs",onClick:()=>{p(!0),u(e),h(!0)},mr:4,children:"修改"}),(0,n.jsx)(a.z,{variant:"filled",color:"red",size:"xs",onClick:()=>f(e),children:"删除"})]})]},e.id));return(0,o.useEffect)(()=>{m()},[]),(0,n.jsxs)(s.x,{pos:"relative",children:[(0,n.jsx)(c.f,{visible:t,overlayOpacity:.3}),(0,n.jsxs)(d.i,{striped:!0,withBorder:!0,withColumnBorders:!0,mt:12,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"编号"}),(0,n.jsx)("th",{children:"LLM代理名称"}),(0,n.jsx)("th",{children:"基础模型名称"}),(0,n.jsx)("th",{children:"描述"}),(0,n.jsx)("th",{children:"LLM服务访问地址"}),(0,n.jsx)("th",{children:"访问token"}),(0,n.jsx)("th",{children:"创建时间"}),(0,n.jsx)("th",{children:"修改时间"}),(0,n.jsx)("th",{children:"操作"})]})}),(0,n.jsx)("tbody",{children:g})]})]})}function C(){let e=(0,j.s6)().open,t=(0,j.s6)().isEdit,r=(0,j.s6)().setEditStatus,i=(0,j.s6)().setOpen,l=(0,j.s6)().setLoading,c=(0,j.s6)().currentModel,d={name:"",name_alias:"",url:"",token:"",timeout:k.t5,description:""},g=(0,y.c)({initialValues:d,validate:{name:e=>e?null:"名称必填",name_alias:e=>e?null:"模型别名必填",url:e=>/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)?null:"请输入合法的访问地址"}});return(0,o.useEffect)(()=>{t&&g.setValues({name:(null==c?void 0:c.name)||"",name_alias:(null==c?void 0:c.name_alias)||"",url:(null==c?void 0:c.url)||"",token:(null==c?void 0:c.token)||"",timeout:(null==c?void 0:c.timeout)||k.t5,description:(null==c?void 0:c.description)||""})},[c]),(0,n.jsxs)(h.u,{opened:e,onClose:()=>{i(!1)},title:t?"修改LLM代理":"创建LLM代理",centered:!0,children:[(0,n.jsxs)(s.x,{maw:640,mx:"auto",children:[(0,n.jsx)(p.o,{withAsterisk:!0,label:"LLM代理名",placeholder:"",...g.getInputProps("name_alias"),description:"LLM代理的名称"}),(0,n.jsx)(p.o,{withAsterisk:!0,label:"模型名",placeholder:"",...g.getInputProps("name"),description:"基础模型服务需要的模型参数，通过LLM代理透传给基础模型服务，比如访问千问的模型明示qwen-plus或qwen-turbo"}),(0,n.jsx)(p.o,{withAsterisk:!0,label:(0,n.jsxs)("span",{children:["基础模型服务访问地址",(0,n.jsx)("a",{href:"/foundationModel/create",target:"_blank",children:"还没有基础模型服务？去创建"})]}),placeholder:"",...g.getInputProps("url"),description:"基础模型服务原始地址，可以通过基础模型菜单访问创建,创建成功后粘贴基础模服务访问地址在此"}),(0,n.jsx)(u.W,{label:"LLM服务访问token",placeholder:"",...g.getInputProps("token"),description:"当你访问的服务需要透传token，比如openai 的chatgpt，在这里填写，默认情况下可以不填写"}),(0,n.jsx)(f.Y,{label:"访问超时时间(s)",placeholder:"",...g.getInputProps("timeout"),description:"AgentCraft访问基础模型服务的超时时间"}),(0,n.jsx)(m.g,{label:"描述",placeholder:"输入数据集描述",...g.getInputProps("description")})]}),(0,n.jsx)(s.x,{maw:640,mx:"auto",pt:12,style:{textAlign:"right"},children:(0,n.jsx)(a.z,{onClick:async()=>{if(g.validate(),g.isValid())try{l(!0),t?await (0,j.QB)(null==c?void 0:c.id,g.values):await (0,j.mS)(g.values),await (0,j.fZ)(),i(!1),g.reset()}catch(e){console.log(e)}finally{r(!1),l(!1)}},children:"确认"})})]})}function L(){let e=[{title:"AgentCraft",href:"#"},{title:"LLM代理",href:"/model"}].map((e,t)=>(0,n.jsx)(g.e,{href:e.href,children:e.title},t)),t=(0,j.s6)().setOpen,r=(0,j.s6)().setEditStatus;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.O,{children:e}),(0,n.jsx)(O.Z,{title:"LLM代理",description:"AgentCraft的LLM代理是基于基础大语言模型服务比如通义千问等构建出的一个代理层服务，主要是为了抹平不同模型服务之间的接口数据差异，方便在业务中快速切换更加适合的模型服务"}),(0,n.jsx)(s.x,{mt:12,children:(0,n.jsx)(a.z,{onClick:()=>{r(!1),t(!0)},children:"新建LLM代理"})}),(0,n.jsx)(C,{}),(0,n.jsx)(S,{})]})}function z(){return(0,n.jsx)(L,{})}},24350:function(e,t,r){"use strict";r.d(t,{$s:function(){return s},QB:function(){return d},fZ:function(){return a},mS:function(){return c},s6:function(){return l}});var n=r(64529),o=r(782),i=r(71791);let l=(0,n.Ue)()((0,o.mW)(e=>({modelList:[],loading:!1,open:!1,isEdit:!1,updateCurrentModel:t=>e(e=>({currentModel:t})),setEditStatus:t=>e(e=>({isEdit:t})),setLoading:t=>e(e=>({loading:t})),setOpen:t=>e(e=>({open:t})),updateModelList:t=>e(e=>({modelList:t}))})));async function a(){let e=l.getState(),t=e.updateModelList,r=await (0,i.W)("/api/model/list"),n=await r.data;n&&t(n)}async function s(e){return await (0,i.W)("/api/model/delete?id=".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})}async function c(e){return await (0,i.W)("/api/model/create",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}async function d(e,t){return await (0,i.W)("/api/model/update?id=".concat(e),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}},37044:function(e){e.exports={"copy-to-clipboard-content":"CopyToClipboard_copy-to-clipboard-content__fv4wW"}}},function(e){e.O(0,[871,754,322,774,888,179],function(){return e(e.s=2065)}),_N_E=e.O()}]);