(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{93284:function(e,t,r){"use strict";r.d(t,{O:function(){return u}});var n=r(67294),a=r(64761),o=r(24241),i=(0,r(56817).k)(e=>({root:{display:"flex",alignItems:"center"},breadcrumb:{lineHeight:1,whiteSpace:"nowrap",WebkitTapHighlightColor:"transparent"},separator:{marginLeft:e.spacing.xs,marginRight:e.spacing.xs,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[7],lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center"}})),l=r(95117),c=r(64523),s=Object.defineProperty,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&__defNormalProp(e,r,t[r]);if(d)for(var r of d(t))h.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__objRest=(e,t)=>{var r={};for(var n in e)p.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))0>t.indexOf(n)&&h.call(e,n)&&(r[n]=e[n]);return r};let f={separator:"/"},u=(0,n.forwardRef)((e,t)=>{let r=(0,a.N4)("Breadcrumbs",f,e),{className:s,children:d,separator:p,classNames:h,styles:u,unstyled:g,variant:b}=r,m=__objRest(r,["className","children","separator","classNames","styles","unstyled","variant"]),{classes:y,cx:_}=i(null,{classNames:h,styles:u,unstyled:g,name:"Breadcrumbs",variant:b}),x=n.Children.toArray(d).reduce((e,t,r,a)=>{var i;let c=(0,o.k)(t)?n.cloneElement(t,{className:_(y.breadcrumb,null==(i=t.props)?void 0:i.className),key:r}):n.createElement("div",{className:y.breadcrumb,key:r},t);return e.push(c),r!==a.length-1&&e.push(n.createElement(l.x,{size:"sm",className:y.separator,key:`separator-${r}`},p)),e},[]);return n.createElement(c.x,__spreadValues({className:_(y.root,s),ref:t},m),x)});u.displayName="@mantine/core/Breadcrumbs"},95033:function(e,t,r){"use strict";r.d(t,{y:function(){return v}});var n=r(67294),a=r(64761),o=r(48427),i=r(95117),l=(0,r(56817).k)((e,{color:t})=>({root:{backgroundColor:e.fn.themeColor(t,"dark"===e.colorScheme?5:2),color:"dark"===e.colorScheme?e.colors.dark[9]:"inherit"}})),c=r(64523),s=Object.defineProperty,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&__defNormalProp(e,r,t[r]);if(d)for(var r of d(t))h.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__objRest=(e,t)=>{var r={};for(var n in e)p.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))0>t.indexOf(n)&&h.call(e,n)&&(r[n]=e[n]);return r};let f={color:"yellow"},u=(0,n.forwardRef)((e,t)=>{let r=(0,a.N4)("Mark",f,e),{color:o,className:i,unstyled:s,variant:d}=r,p=__objRest(r,["color","className","unstyled","variant"]),{classes:h,cx:u}=l({color:o},{unstyled:s,name:"Mark",variant:d});return n.createElement(c.x,__spreadValues({component:"mark",ref:t,className:u(h.root,i)},p))});function escapeRegex(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}u.displayName="@mantine/core/Mark";var g=Object.defineProperty,b=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,Highlight_defNormalProp=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Highlight_spreadValues=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&Highlight_defNormalProp(e,r,t[r]);if(b)for(var r of b(t))y.call(t,r)&&Highlight_defNormalProp(e,r,t[r]);return e},Highlight_objRest=(e,t)=>{var r={};for(var n in e)m.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&b)for(var n of b(e))0>t.indexOf(n)&&y.call(e,n)&&(r[n]=e[n]);return r};let _={highlightColor:"yellow"},x=(0,n.forwardRef)((e,t)=>{let r=(0,a.N4)("Highlight",_,e),{children:o,highlight:l,highlightColor:c,highlightStyles:s,unstyled:d}=r,p=Highlight_objRest(r,["children","highlight","highlightColor","highlightStyles","unstyled"]),h=function(e,t){if(null==t)return[{chunk:e,highlighted:!1}];let r=Array.isArray(t)?t.map(escapeRegex):escapeRegex(t),n=Array.isArray(r)?r.filter(e=>e.trim().length>0).length>0:""!==r.trim();if(!n)return[{chunk:e,highlighted:!1}];let a="string"==typeof r?r.trim():r.filter(e=>0!==e.trim().length).map(e=>e.trim()).join("|"),o=RegExp(`(${a})`,"gi"),i=e.split(o).map(e=>({chunk:e,highlighted:o.test(e)})).filter(({chunk:e})=>e);return i}(o,l);return n.createElement(i.x,Highlight_spreadValues({unstyled:d,ref:t,__staticSelector:"Highlight"},p),h.map(({chunk:e,highlighted:t},r)=>t?n.createElement(u,{unstyled:d,key:r,color:c,sx:s,"data-highlight":e},e):n.createElement("span",{key:r},e)))});x.displayName="@mantine/core/Highlight";let v=(0,o.F)(x)},95078:function(e,t,r){"use strict";r.d(t,{i:function(){return w}});var n=r(67294),a=r(64761),o=r(56817),i=r(96768),l=r(14258),c=Object.defineProperty,s=Object.defineProperties,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&__defNormalProp(e,r,t[r]);if(p)for(var r of p(t))f.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>s(e,d(t)),u=(0,o.k)((e,{captionSide:t,horizontalSpacing:r,verticalSpacing:n,fontSize:a,withBorder:o,withColumnBorders:c})=>{let s=`${(0,i.h)(1)} solid ${"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[3]}`;return{root:__spreadProps(__spreadValues({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:o?s:void 0,"& caption":{marginTop:"top"===t?0:e.spacing.xs,marginBottom:"bottom"===t?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:"dark"===e.colorScheme?e.colors.dark[0]:e.colors.gray[7],fontSize:(0,l.a)({size:a,sizes:e.fontSizes}),padding:`${(0,l.a)({size:n,sizes:e.spacing})} ${(0,l.a)({size:r,sizes:e.spacing})}`},"& thead tr th":{borderBottom:s},"& tfoot tr th, & tbody tr th":{borderTop:s},"& tbody tr td":{padding:`${(0,l.a)({size:n,sizes:e.spacing})} ${(0,l.a)({size:r,sizes:e.spacing})}`,borderTop:s,fontSize:(0,l.a)({size:a,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:c?s:"none","&:last-of-type":{borderRight:"none",borderLeft:c?s:"none"}},"& tbody tr th":{borderRight:c?s:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[1]})})}}),g=r(64523),b=Object.defineProperty,m=Object.defineProperties,y=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,Table_defNormalProp=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Table_spreadValues=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&Table_defNormalProp(e,r,t[r]);if(_)for(var r of _(t))v.call(t,r)&&Table_defNormalProp(e,r,t[r]);return e},Table_spreadProps=(e,t)=>m(e,y(t)),__objRest=(e,t)=>{var r={};for(var n in e)x.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&_)for(var n of _(e))0>t.indexOf(n)&&v.call(e,n)&&(r[n]=e[n]);return r};let j={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},w=(0,n.forwardRef)((e,t)=>{let r=(0,a.N4)("Table",j,e),{className:o,children:i,striped:l,highlightOnHover:c,captionSide:s,horizontalSpacing:d,verticalSpacing:p,fontSize:h,unstyled:f,withBorder:b,withColumnBorders:m,variant:y}=r,_=__objRest(r,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:x,cx:v}=u({captionSide:s,verticalSpacing:p,horizontalSpacing:d,fontSize:h,withBorder:b,withColumnBorders:m},{unstyled:f,name:"Table",variant:y});return n.createElement(g.x,Table_spreadProps(Table_spreadValues({},_),{component:"table",ref:t,className:v(x.root,o),"data-striped":l||void 0,"data-hover":c||void 0}),i)});w.displayName="@mantine/core/Table"},36122:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clientAccess",function(){return r(57353)}])},2394:function(e,t,r){"use strict";r.d(t,{Z:function(){return FeatureDescription}});var n=r(85893),a=r(92716),o=r(95117),i=r(64523),l=r(69876),c=r(19236),s=r(91759);function InfoDetail(e){let{detail:t,title:r}=e,[i,{open:l,close:c}]=(0,s.q)(!1);return(0,n.jsx)(n.Fragment,{children:t?(0,n.jsxs)("div",{children:[(0,n.jsx)(a.d,{opened:i,onClose:c,title:r,children:(0,n.jsx)(o.x,{children:t})}),(0,n.jsx)(o.x,{onClick:()=>l(),children:"信息"})]}):null})}function FeatureDescription(e){let{title:t,description:r,detail:a,mt:s,mb:d}=e;return(0,n.jsxs)(i.x,{mt:s||24,mb:d||24,children:[(0,n.jsxs)(l.k,{mih:20,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:[(0,n.jsx)(c.D,{order:2,children:t}),(0,n.jsx)(InfoDetail,{title:t,detail:a})]}),r?(0,n.jsx)(o.x,{lineClamp:4,children:r}):null]})}},7374:function(e,t,r){"use strict";var n,a,o,i,l;r.d(t,{KJ:function(){return a},Pw:function(){return g},TN:function(){return c},Vg:function(){return u},W8:function(){return y},X_:function(){return p},bb:function(){return o},fC:function(){return b},kg:function(){return n},l1:function(){return m},wm:function(){return s},xr:function(){return d}}),(i=n||(n={})).DING_TALK="dingtalk",i.WECHAT="wechat",(a||(a={})).CHATGPT_NEXTJS_WEB="chatgpt-next-web";let c=[{label:"钉钉机器人",value:"dingtalk",image:"https://img.alicdn.com/imgextra/i2/O1CN019OiHSB1tMIXnlm4k0_!!6000000005887-2-tps-200-200.png",description:"钉钉机器人"},{label:"微信个人机器人",value:"wechat",image:"https://img.alicdn.com/imgextra/i1/O1CN01bhGQ8126xw6OOzOxN_!!6000000007729-2-tps-200-200.png",description:"微信个人机器人"}],s=[{label:"chatgpt-next-web应用模板",value:"chatgpt-next-web",image:"https://img.alicdn.com/imgextra/i3/O1CN010n937P22NW91SAmvB_!!6000000007108-0-tps-1678-958.jpg",description:"chatgpt-next-web"}],d="cn-hangzhou",p="AGENTCRAFT_CLIENT",h="agentcraft-client-dingtalk",f="agentcraft-client-wechat";(l=o||(o={}))[l.AGENT_SERVICE=0]="AGENT_SERVICE",l[l.SERVICE_CONFIG_PREVIEW=1]="SERVICE_CONFIG_PREVIEW",l[l.ROBOT_WEBHOOK=2]="ROBOT_WEBHOOK";let u={[h]:"钉钉机器人",[f]:"微信机器人（个人版）"},g={dingtalk:h,wechat:f},b={dingtalk:"agentcraft-dingtalk-agent-server",wechat:"agentcraft-wechat-agent-server"},m={"chatgpt-next-web":"agentcraft-client-web"},y={"chatgpt-next-web":"agentcraft-web-frontend"}},57353:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return IndexPage}});var n=r(85893),a=r(67294),o=r(11163),i=r(95117),l=r(95033),c=r(67841),s=r(64523),d=r(49737),p=r(95078),h=r(54685),f=r(93284),u=r(69876),g=r(73344),b=r(5638),m=r(2394),y=r(7374),_=r(25288);function List(){let e=(0,b.iZ)().clientAccessList,t=(0,b.iZ)().setLoading,r=(0,b.iZ)().loading,removeFoundationModel=e=>{let r="确定删除".concat(e,",该资源会被彻底清除，请仔细检查相关的依赖项?");g.qk.openConfirmModal({title:"删除客户端接入",centered:!0,children:(0,n.jsx)(i.x,{size:"sm",children:(0,n.jsx)(l.y,{highlight:e,children:r})}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),confirmProps:{color:"red"},onConfirm:async()=>{t(!0);try{await (0,b.i7)(e),await (0,b.bc)()}catch(e){console.log(e)}t(!1)}})},o=e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[(0,n.jsx)("div",{style:{width:200,wordBreak:"break-word"},children:y.Vg[e.template]}),(0,n.jsx)("div",{style:{width:200,wordBreak:"break-word"},children:e.name})]}),(0,n.jsx)("td",{children:e.description}),(0,n.jsx)("td",{children:(0,_.o0)(parseInt(e.createdTime))}),(0,n.jsxs)("td",{children:[" ",(0,n.jsx)("a",{href:"https://fcnext.console.aliyun.com/applications/".concat(e.name,"/env/default?tab=envDetail"),target:"_blank",children:"访问云服务"}),(0,n.jsx)(c.z,{ml:12,variant:"filled",color:"red",size:"xs",onClick:()=>removeFoundationModel(e.name),children:"删除"})]})]},e.name));async function getAllClientAccess(){t(!0);try{await (0,b.bc)()}catch(e){console.log(e)}t(!1)}return(0,a.useEffect)(()=>{getAllClientAccess()},[]),(0,n.jsxs)(s.x,{pos:"relative",children:[(0,n.jsx)(d.f,{visible:r,overlayOpacity:.3}),(0,n.jsxs)(p.i,{striped:!0,withBorder:!0,withColumnBorders:!0,mt:12,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"客户端接入服务"}),(0,n.jsx)("th",{children:"描述"}),(0,n.jsx)("th",{children:"创建时间"}),(0,n.jsx)("th",{children:"操作"})]})}),(0,n.jsx)("tbody",{children:o})]})]})}function ClientAccess(){let e=(0,o.useRouter)(),t=[{title:"AgentCraft",href:"/"},{title:"客户端接入",href:"/clientAccess"}].map((e,t)=>(0,n.jsx)(h.e,{href:e.href,children:e.title},t));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.O,{children:t}),(0,n.jsx)(m.Z,{title:"客户端接入",description:"AgentCraft可以通过构建客户端接入服务，帮助您将智能服务接入到独立的web服务， 钉钉，微信机器人，以及嵌入您的网站"}),(0,n.jsx)(s.x,{children:(0,n.jsx)(u.k,{mih:50,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:(0,n.jsx)(c.z,{onClick:()=>e.push("/clientAccess/create"),children:"创建基础客户端接入"})})}),(0,n.jsx)(List,{})]})}function IndexPage(){return(0,n.jsx)(ClientAccess,{})}},5638:function(e,t,r){"use strict";r.d(t,{Ow:function(){return createEventbus},bc:function(){return getClientAccessList},i7:function(){return deleteClientAccess},iZ:function(){return c},xn:function(){return createChatBotBridgeService}});var n=r(64529),a=r(782),o=r(43726),i=r(7374),l=r(2393);let c=(0,n.Ue)((0,a.mW)(e=>({clientAccessList:[],loading:!1,activeStep:i.bb.AGENT_SERVICE,agents:[],selectedAgent:{},robotStepStatus:{robot_proxy_service_create_loading:!1,robot_webhook_create_loading:!1},robotConfig:{robotProxyServiceConfig:{},robotWebhookConfig:{}},setLoading:t=>e(()=>({loading:t})),setOpen:t=>e(()=>({open:t})),updateClientAccessList:t=>e(e=>({clientAccessList:t})),setActiveStep:t=>{e({activeStep:t})},setRobotConfig:t=>{e({robotConfig:t})},setRobotStepStatus:t=>{e({robotStepStatus:t})}})));async function createChatBotBridgeService(e,t){return await (0,o.H)(e,t)}async function createEventbus(e){return await (0,l.W)("/api/clientAccess/eventbus",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}async function getClientAccessList(){let e=c.getState(),t=e.updateClientAccessList,r=await (0,l.W)("/api/infra/alibaba-cloud/listApps?appFilter=".concat(i.X_)),n=r.data;n&&t(n)}async function deleteClientAccess(e){return await (0,l.W)("/api/infra/alibaba-cloud/deleteApp?appName=".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})}},43726:function(e,t,r){"use strict";r.d(t,{H:function(){return createServerlessApp},p:function(){return checkAppStatus}});var n=r(2393);function checkAppStatus(e){return new Promise((t,r)=>{let a=setInterval(async()=>{try{let r=await (0,n.W)("/api/infra/alibaba-cloud/getApp?appName=".concat(e)),o=r.data.lastRelease;"published"===o.status&&(clearInterval(a),t(o))}catch(e){}},4e3)})}async function createServerlessApp(e,t){var r;let a=await (0,n.W)("/api/infra/alibaba-cloud/createApp?template=".concat(e),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});return(null==a?void 0:null===(r=a.data)||void 0===r?void 0:r.name)||""}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=36122)}),_N_E=e.O()}]);