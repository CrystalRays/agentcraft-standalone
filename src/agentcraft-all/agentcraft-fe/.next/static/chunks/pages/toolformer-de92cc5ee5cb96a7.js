(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{93284:function(e,t,r){"use strict";r.d(t,{O:function(){return f}});var o=r(67294),a=r(3241),n=r(24241),l=(0,r(56817).k)(e=>({root:{display:"flex",alignItems:"center"},breadcrumb:{lineHeight:1,whiteSpace:"nowrap",WebkitTapHighlightColor:"transparent"},separator:{marginLeft:e.spacing.xs,marginRight:e.spacing.xs,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[7],lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center"}})),i=r(95117),s=r(64523),c=Object.defineProperty,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&__defNormalProp(e,r,t[r]);if(d)for(var r of d(t))u.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__objRest=(e,t)=>{var r={};for(var o in e)p.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&d)for(var o of d(e))0>t.indexOf(o)&&u.call(e,o)&&(r[o]=e[o]);return r};let h={separator:"/"},f=(0,o.forwardRef)((e,t)=>{let r=(0,a.N4)("Breadcrumbs",h,e),{className:c,children:d,separator:p,classNames:u,styles:f,unstyled:m,variant:g}=r,b=__objRest(r,["className","children","separator","classNames","styles","unstyled","variant"]),{classes:y,cx:x}=l(null,{classNames:u,styles:f,unstyled:m,name:"Breadcrumbs",variant:g}),j=o.Children.toArray(d).reduce((e,t,r,a)=>{var l;let s=(0,n.k)(t)?o.cloneElement(t,{className:x(y.breadcrumb,null==(l=t.props)?void 0:l.className),key:r}):o.createElement("div",{className:y.breadcrumb,key:r},t);return e.push(s),r!==a.length-1&&e.push(o.createElement(i.x,{size:"sm",className:y.separator,key:`separator-${r}`},p)),e},[]);return o.createElement(s.x,__spreadValues({className:x(y.root,c),ref:t},b),j)});f.displayName="@mantine/core/Breadcrumbs"},95033:function(e,t,r){"use strict";r.d(t,{y:function(){return _}});var o=r(67294),a=r(3241),n=r(48427),l=r(95117),i=(0,r(56817).k)((e,{color:t})=>({root:{backgroundColor:e.fn.themeColor(t,"dark"===e.colorScheme?5:2),color:"dark"===e.colorScheme?e.colors.dark[9]:"inherit"}})),s=r(64523),c=Object.defineProperty,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&__defNormalProp(e,r,t[r]);if(d)for(var r of d(t))u.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__objRest=(e,t)=>{var r={};for(var o in e)p.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&d)for(var o of d(e))0>t.indexOf(o)&&u.call(e,o)&&(r[o]=e[o]);return r};let h={color:"yellow"},f=(0,o.forwardRef)((e,t)=>{let r=(0,a.N4)("Mark",h,e),{color:n,className:l,unstyled:c,variant:d}=r,p=__objRest(r,["color","className","unstyled","variant"]),{classes:u,cx:f}=i({color:n},{unstyled:c,name:"Mark",variant:d});return o.createElement(s.x,__spreadValues({component:"mark",ref:t,className:f(u.root,l)},p))});function escapeRegex(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}f.displayName="@mantine/core/Mark";var m=Object.defineProperty,g=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,Highlight_defNormalProp=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Highlight_spreadValues=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&Highlight_defNormalProp(e,r,t[r]);if(g)for(var r of g(t))y.call(t,r)&&Highlight_defNormalProp(e,r,t[r]);return e},Highlight_objRest=(e,t)=>{var r={};for(var o in e)b.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&g)for(var o of g(e))0>t.indexOf(o)&&y.call(e,o)&&(r[o]=e[o]);return r};let x={highlightColor:"yellow"},j=(0,o.forwardRef)((e,t)=>{let r=(0,a.N4)("Highlight",x,e),{children:n,highlight:i,highlightColor:s,highlightStyles:c,unstyled:d}=r,p=Highlight_objRest(r,["children","highlight","highlightColor","highlightStyles","unstyled"]),u=function(e,t){if(null==t)return[{chunk:e,highlighted:!1}];let r=Array.isArray(t)?t.map(escapeRegex):escapeRegex(t),o=Array.isArray(r)?r.filter(e=>e.trim().length>0).length>0:""!==r.trim();if(!o)return[{chunk:e,highlighted:!1}];let a="string"==typeof r?r.trim():r.filter(e=>0!==e.trim().length).map(e=>e.trim()).join("|"),n=RegExp(`(${a})`,"gi"),l=e.split(n).map(e=>({chunk:e,highlighted:n.test(e)})).filter(({chunk:e})=>e);return l}(n,i);return o.createElement(l.x,Highlight_spreadValues({unstyled:d,ref:t,__staticSelector:"Highlight"},p),u.map(({chunk:e,highlighted:t},r)=>t?o.createElement(f,{unstyled:d,key:r,color:s,sx:c,"data-highlight":e},e):o.createElement("span",{key:r},e)))});j.displayName="@mantine/core/Highlight";let _=(0,n.F)(j)},95078:function(e,t,r){"use strict";r.d(t,{i:function(){return S}});var o=r(67294),a=r(3241),n=r(56817),l=r(96768),i=r(14258),s=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&__defNormalProp(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>c(e,d(t)),f=(0,n.k)((e,{captionSide:t,horizontalSpacing:r,verticalSpacing:o,fontSize:a,withBorder:n,withColumnBorders:s})=>{let c=`${(0,l.h)(1)} solid ${"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[3]}`;return{root:__spreadProps(__spreadValues({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:n?c:void 0,"& caption":{marginTop:"top"===t?0:e.spacing.xs,marginBottom:"bottom"===t?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:"dark"===e.colorScheme?e.colors.dark[0]:e.colors.gray[7],fontSize:(0,i.a)({size:a,sizes:e.fontSizes}),padding:`${(0,i.a)({size:o,sizes:e.spacing})} ${(0,i.a)({size:r,sizes:e.spacing})}`},"& thead tr th":{borderBottom:c},"& tfoot tr th, & tbody tr th":{borderTop:c},"& tbody tr td":{padding:`${(0,i.a)({size:o,sizes:e.spacing})} ${(0,i.a)({size:r,sizes:e.spacing})}`,borderTop:c,fontSize:(0,i.a)({size:a,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:s?c:"none","&:last-of-type":{borderRight:"none",borderLeft:s?c:"none"}},"& tbody tr th":{borderRight:s?c:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[1]})})}}),m=r(64523),g=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,Table_defNormalProp=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Table_spreadValues=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&Table_defNormalProp(e,r,t[r]);if(x)for(var r of x(t))_.call(t,r)&&Table_defNormalProp(e,r,t[r]);return e},Table_spreadProps=(e,t)=>b(e,y(t)),__objRest=(e,t)=>{var r={};for(var o in e)j.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&x)for(var o of x(e))0>t.indexOf(o)&&_.call(e,o)&&(r[o]=e[o]);return r};let w={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},S=(0,o.forwardRef)((e,t)=>{let r=(0,a.N4)("Table",w,e),{className:n,children:l,striped:i,highlightOnHover:s,captionSide:c,horizontalSpacing:d,verticalSpacing:p,fontSize:u,unstyled:h,withBorder:g,withColumnBorders:b,variant:y}=r,x=__objRest(r,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:j,cx:_}=f({captionSide:c,verticalSpacing:p,horizontalSpacing:d,fontSize:u,withBorder:g,withColumnBorders:b},{unstyled:h,name:"Table",variant:y});return o.createElement(m.x,Table_spreadProps(Table_spreadValues({},x),{component:"table",ref:t,className:_(j.root,n),"data-striped":i||void 0,"data-hover":s||void 0}),l)});S.displayName="@mantine/core/Table"},77786:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/toolformer",function(){return r(1134)}])},2394:function(e,t,r){"use strict";r.d(t,{Z:function(){return FeatureDescription}});var o=r(85893),a=r(92716),n=r(95117),l=r(64523),i=r(69876),s=r(19236),c=r(91759);function InfoDetail(e){let{detail:t,title:r}=e,[l,{open:i,close:s}]=(0,c.q)(!1);return(0,o.jsx)(o.Fragment,{children:t?(0,o.jsxs)("div",{children:[(0,o.jsx)(a.d,{opened:l,onClose:s,title:r,children:(0,o.jsx)(n.x,{children:t})}),(0,o.jsx)(n.x,{onClick:()=>i(),children:"信息"})]}):null})}function FeatureDescription(e){let{title:t,description:r,detail:a,mt:c,mb:d}=e;return(0,o.jsxs)(l.x,{mt:c||24,mb:d||24,children:[(0,o.jsxs)(i.k,{mih:20,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:[(0,o.jsx)(s.D,{order:2,children:t}),(0,o.jsx)(InfoDetail,{title:t,detail:a})]}),r?(0,o.jsx)(n.x,{lineClamp:4,children:r}):null]})}},1134:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return IndexPage}});var o=r(85893),a=r(67294),n=r(11163),l=r(64523),i=r(80061),s=r(52615),c=r(14127),d=r(94491),p=r(67841),u=r(95117),h=r(95033),f=r(49737),m=r(95078),g=r(54685),b=r(93284),y=r(69876),x=r(77248),j=r(73344),_=r(15590),w=r(13962),S=r(2394),O=r(25288),k=r(86105);function DocumentForm(e){let{form:t}=e;return(0,o.jsxs)(l.x,{maw:k.hE,mx:"auto",children:[(0,o.jsx)(i.o,{withAsterisk:!0,label:"标题",placeholder:"",...t.getInputProps("title")}),(0,o.jsx)(s.g,{withAsterisk:!0,label:"内容",placeholder:"",...t.getInputProps("content")}),(0,o.jsx)(i.o,{label:"来源url",placeholder:"",...t.getInputProps("url")}),(0,o.jsx)(c.Y,{label:"文档切片大小",placeholder:"",...t.getInputProps("chunk_size")})]})}function QuestionForm(e){let{form:t}=e;return(0,o.jsxs)(l.x,{maw:k.hE,mx:"auto",children:[(0,o.jsx)(i.o,{withAsterisk:!0,label:"标题",placeholder:"",...t.getInputProps("title")}),(0,o.jsx)(s.g,{withAsterisk:!0,label:"问题",placeholder:"",...t.getInputProps("question")}),(0,o.jsx)(s.g,{withAsterisk:!0,label:"答案",placeholder:"",...t.getInputProps("answer")}),(0,o.jsx)(i.o,{label:"来源url",placeholder:"",...t.getInputProps("url")})]})}function Add(){let e=(0,n.useRouter)(),t=(0,_.qo)().open,r=(0,_.qo)().setOpen,a=(0,_.qo)().setLoading,{query:i}=e,s=i.dataSetType,c=i.id,u=(0,x.c)({initialValues:{title:"",content:"",url:"",chunk_size:1024,ext:"txt",tag:c},validate:{title:e=>e?null:"标题必填",content:e=>e?null:"内容必填"}}),h=(0,x.c)({initialValues:{title:"",question:"",answer:"",tag:c,url:""},validate:{title:e=>e?null:"标题必填",question:e=>e?null:"问题必填",answer:e=>e?null:"答案必填"}}),f=s==w.I.DOCUMENT?u:h;return(0,o.jsxs)(d.u,{opened:t,onClose:()=>{r(!1)},title:"创建数据集",centered:!0,children:[s==w.I.DOCUMENT?(0,o.jsx)(DocumentForm,{form:u}):(0,o.jsx)(QuestionForm,{form:h}),(0,o.jsx)(l.x,{maw:k.hE,mx:"auto",pt:12,style:{textAlign:"right"},children:(0,o.jsx)(p.z,{onClick:async()=>{if(f.validate(),f.isValid())try{a(!0);let e=f.values;await (0,_.J_)({dataSetId:c,dataSetType:s},e),await (0,_.z9)(c,s)}catch(e){console.log(e)}finally{r(!1),a(!1)}},children:"确认"})})]})}function List(e){let{dataSetId:t,dataSetType:r}=e,n=(0,_.qo)().loading,i=(0,_.qo)().setLoading,removeDataDataSource=e=>{let{id:a,title:n}=e;j.qk.openConfirmModal({title:"删除数据集",centered:!0,children:(0,o.jsx)(u.x,{size:"sm",children:(0,o.jsx)(h.y,{highlight:n,children:"确定删除 ".concat(n,"?")})}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),confirmProps:{color:"red"},onConfirm:async()=>{i(!0),await (0,_.xU)({dataSetId:t,dataSetType:r,dataSourceId:a}),await (0,_.z9)(t,r),i(!1)}})},s=[].map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.id}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{style:{width:100,wordBreak:"break-word"},children:e.title})}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{style:{width:200,wordBreak:"break-word"},children:e.url})}),r==w.I.QUESTION?(0,o.jsx)("td",{children:e.question}):null,(0,o.jsx)("td",{children:e.doc_chunk}),(0,o.jsx)("td",{children:e.token_size}),(0,o.jsx)("td",{children:(0,O.o0)(e.created)}),(0,o.jsx)("td",{children:(0,O.o0)(e.modified)}),(0,o.jsxs)("td",{children:[" ",(0,o.jsx)(p.z,{variant:"filled",color:"red",size:"xs",onClick:()=>removeDataDataSource(e),children:"删除"})]})]},e.id));return(0,a.useEffect)(()=>{(0,_.z9)(t,r)},[]),(0,o.jsxs)(l.x,{pos:"relative",children:[(0,o.jsx)(f.f,{visible:n,overlayOpacity:.3}),(0,o.jsxs)(m.i,{striped:!0,withBorder:!0,withColumnBorders:!0,mt:12,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"名称"}),(0,o.jsx)("th",{children:"描述"}),(0,o.jsx)("th",{children:"源访问地址"}),(0,o.jsx)("th",{children:"创建时间"}),(0,o.jsx)("th",{children:"修改时间"}),(0,o.jsx)("th",{children:"操作"})]})}),(0,o.jsx)("tbody",{children:s})]})]})}function ToolFormer(){let e=(0,n.useRouter)(),{query:t}=e,r=t.dataSetType,a=t.id,i=[{title:"AgentCraft",href:"/"},{title:"LLM工具集",href:"/toolformer"}].map((e,t)=>(0,o.jsx)(g.e,{href:e.href,children:e.title},t));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.O,{children:i}),(0,o.jsx)(S.Z,{title:"LLM工具集",description:"AgentCraft可以快速构建您业务所需要的工具函数，提供场景模板，快速部署，调试及日志访问能力，通过工具集可以帮助您构建更加强大的Agent服务"}),(0,o.jsx)(l.x,{children:(0,o.jsx)(y.k,{mih:50,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:(0,o.jsx)(p.z,{onClick:()=>e.push("/foundationModel/create"),children:"创建工具函数"})})}),(0,o.jsx)(Add,{}),(0,o.jsx)(List,{dataSetId:a,dataSetType:r})]})}function IndexPage(){return(0,o.jsx)(ToolFormer,{})}},15590:function(e,t,r){"use strict";r.d(t,{$s:function(){return addDataSourceByUploadFile},J_:function(){return addDataSource},oe:function(){return updateDataSource},qo:function(){return l},xU:function(){return deleteDataSource},z9:function(){return getDataSourceList}});var o=r(64529),a=r(782),n=r(23824);let l=(0,o.Ue)()((0,a.mW)(e=>({dataSourceList:[],loading:!1,open:!1,isEdit:!1,openUploadModel:!1,currentDataSource:{},setCurrentDataSource:t=>e(e=>({currentDataSource:t})),setIsEdit:t=>e(e=>({isEdit:t})),setLoading:t=>e(e=>({loading:t})),setOpen:t=>e(e=>({open:t})),setOpenUploadModel:t=>e(e=>({openUploadModel:t})),updatedataSourceList:t=>e(e=>({dataSourceList:t}))})));async function getDataSourceList(e,t){let r=l.getState(),o=r.updatedataSourceList,a=await (0,n.W)("/api/dataset/".concat(e,"/datasource/list?dataSetType=").concat(t)),i=a.data;i&&o(i)}async function deleteDataSource(e){let{dataSetId:t,dataSetType:r,dataSourceId:o}=e,a=await (0,n.W)("/api/dataset/".concat(t,"/datasource/delete?dataSetType=").concat(r,"&dataSourceId=").concat(o),{method:"DELETE",headers:{"Content-Type":"application/json"}});await a}async function addDataSource(e,t){let{dataSetId:r,dataSetType:o}=e,a=await (0,n.W)("/api/dataset/".concat(r,"/datasource/create?dataSetType=").concat(o),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});await a}async function updateDataSource(e,t){let{dataSetId:r,dataSetType:o,dataSourceId:a}=e,l=await (0,n.W)("/api/dataset/".concat(r,"/datasource/update?dataSetType=").concat(o,"&dataSourceId=").concat(a),{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});await l}async function addDataSourceByUploadFile(e,t){let{dataSetId:r}=e,o=await (0,n.W)("/api/dataset/".concat(r,"/datasource/upload"),{method:"POST",body:t,headers:{}});await o}},13962:function(e,t,r){"use strict";var o,a;r.d(t,{I:function(){return o}}),(a=o||(o={}))[a.QUESTION=1]="QUESTION",a[a.DOCUMENT=2]="DOCUMENT"}},function(e){e.O(0,[754,774,888,179],function(){return e(e.s=77786)}),_N_E=e.O()}]);