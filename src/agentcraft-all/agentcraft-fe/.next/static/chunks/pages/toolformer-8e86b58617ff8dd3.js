(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{95033:function(e,t,r){"use strict";r.d(t,{y:function(){return E}});var o=r(67294),n=r(3241),i=r(48427),a=r(95117),l=(0,r(56817).k)((e,{color:t})=>({root:{backgroundColor:e.fn.themeColor(t,"dark"===e.colorScheme?5:2),color:"dark"===e.colorScheme?e.colors.dark[9]:"inherit"}})),c=r(64523),s=Object.defineProperty,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&p(e,r,t[r]);if(d)for(var r of d(t))u.call(t,r)&&p(e,r,t[r]);return e},g=(e,t)=>{var r={};for(var o in e)h.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&d)for(var o of d(e))0>t.indexOf(o)&&u.call(e,o)&&(r[o]=e[o]);return r};let x={color:"yellow"},y=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Mark",x,e),{color:i,className:a,unstyled:s,variant:d}=r,h=g(r,["color","className","unstyled","variant"]),{classes:u,cx:p}=l({color:i},{unstyled:s,name:"Mark",variant:d});return o.createElement(c.x,f({component:"mark",ref:t,className:p(u.root,a)},h))});function m(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}y.displayName="@mantine/core/Mark";var b=Object.defineProperty,j=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&O(e,r,t[r]);if(j)for(var r of j(t))S.call(t,r)&&O(e,r,t[r]);return e},v=(e,t)=>{var r={};for(var o in e)w.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&j)for(var o of j(e))0>t.indexOf(o)&&S.call(e,o)&&(r[o]=e[o]);return r};let z={highlightColor:"yellow"},C=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Highlight",z,e),{children:i,highlight:l,highlightColor:c,highlightStyles:s,unstyled:d}=r,h=v(r,["children","highlight","highlightColor","highlightStyles","unstyled"]),u=function(e,t){if(null==t)return[{chunk:e,highlighted:!1}];let r=Array.isArray(t)?t.map(m):m(t),o=Array.isArray(r)?r.filter(e=>e.trim().length>0).length>0:""!==r.trim();if(!o)return[{chunk:e,highlighted:!1}];let n="string"==typeof r?r.trim():r.filter(e=>0!==e.trim().length).map(e=>e.trim()).join("|"),i=RegExp(`(${n})`,"gi"),a=e.split(i).map(e=>({chunk:e,highlighted:i.test(e)})).filter(({chunk:e})=>e);return a}(i,l);return o.createElement(a.x,k({unstyled:d,ref:t,__staticSelector:"Highlight"},h),u.map(({chunk:e,highlighted:t},r)=>t?o.createElement(y,{unstyled:d,key:r,color:c,sx:s,"data-highlight":e},e):o.createElement("span",{key:r},e)))});C.displayName="@mantine/core/Highlight";let E=(0,i.F)(C)},95078:function(e,t,r){"use strict";r.d(t,{i:function(){return T}});var o=r(67294),n=r(3241),i=r(56817),a=r(96768),l=r(14258),c=Object.defineProperty,s=Object.defineProperties,d=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))p.call(t,r)&&f(e,r,t[r]);return e},x=(e,t)=>s(e,d(t)),y=(0,i.k)((e,{captionSide:t,horizontalSpacing:r,verticalSpacing:o,fontSize:n,withBorder:i,withColumnBorders:c})=>{let s=`${(0,a.h)(1)} solid ${"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[3]}`;return{root:x(g({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:i?s:void 0,"& caption":{marginTop:"top"===t?0:e.spacing.xs,marginBottom:"bottom"===t?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:"dark"===e.colorScheme?e.colors.dark[0]:e.colors.gray[7],fontSize:(0,l.a)({size:n,sizes:e.fontSizes}),padding:`${(0,l.a)({size:o,sizes:e.spacing})} ${(0,l.a)({size:r,sizes:e.spacing})}`},"& thead tr th":{borderBottom:s},"& tfoot tr th, & tbody tr th":{borderTop:s},"& tbody tr td":{padding:`${(0,l.a)({size:o,sizes:e.spacing})} ${(0,l.a)({size:r,sizes:e.spacing})}`,borderTop:s,fontSize:(0,l.a)({size:n,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:c?s:"none","&:last-of-type":{borderRight:"none",borderLeft:c?s:"none"}},"& tbody tr th":{borderRight:c?s:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[1]})})}}),m=r(64523),b=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&v(e,r,t[r]);if(S)for(var r of S(t))k.call(t,r)&&v(e,r,t[r]);return e},C=(e,t)=>j(e,w(t)),E=(e,t)=>{var r={};for(var o in e)O.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&S)for(var o of S(e))0>t.indexOf(o)&&k.call(e,o)&&(r[o]=e[o]);return r};let P={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},T=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Table",P,e),{className:i,children:a,striped:l,highlightOnHover:c,captionSide:s,horizontalSpacing:d,verticalSpacing:h,fontSize:u,unstyled:p,withBorder:f,withColumnBorders:g,variant:x}=r,b=E(r,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:j,cx:w}=y({captionSide:s,verticalSpacing:h,horizontalSpacing:d,fontSize:u,withBorder:f,withColumnBorders:g},{unstyled:p,name:"Table",variant:x});return o.createElement(m.x,C(z({},b),{component:"table",ref:t,className:w(j.root,i),"data-striped":l||void 0,"data-hover":c||void 0}),a)});T.displayName="@mantine/core/Table"},77786:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/toolformer",function(){return r(57075)}])},3658:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var o=r(85893),n=r(92716),i=r(95117),a=r(64523),l=r(69876),c=r(19236),s=r(91759);function d(e){let{detail:t,title:r}=e,[a,{open:l,close:c}]=(0,s.q)(!1);return(0,o.jsx)(o.Fragment,{children:t?(0,o.jsxs)("div",{children:[(0,o.jsx)(n.d,{opened:a,onClose:c,title:r,children:(0,o.jsx)(i.x,{children:t})}),(0,o.jsx)(i.x,{onClick:()=>l(),children:"信息"})]}):null})}function h(e){let{title:t,description:r,detail:n,mt:s,mb:h}=e;return(0,o.jsxs)(a.x,{mt:s||24,mb:h||24,children:[(0,o.jsxs)(l.k,{mih:20,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:[(0,o.jsx)(c.D,{order:2,children:t}),(0,o.jsx)(d,{title:t,detail:n})]}),r?(0,o.jsx)(i.x,{lineClamp:4,children:r}):null]})}},57075:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var o=r(85893),n=r(67294),i=r(11163),a=r(64523),l=r(80061),c=r(52615),s=r(14127),d=r(94491),h=r(67841),u=r(95117),p=r(95033),f=r(49737),g=r(95078),x=r(54685),y=r(93284),m=r(69876),b=r(77248),j=r(73344),w=r(99494),S=r(77194),O=r(3658),k=r(48847),v=r(61407);function z(e){let{form:t}=e;return(0,o.jsxs)(a.x,{maw:v.hE,mx:"auto",children:[(0,o.jsx)(l.o,{withAsterisk:!0,label:"标题",placeholder:"",...t.getInputProps("title")}),(0,o.jsx)(c.g,{withAsterisk:!0,label:"内容",placeholder:"",...t.getInputProps("content")}),(0,o.jsx)(l.o,{label:"来源url",placeholder:"",...t.getInputProps("url")}),(0,o.jsx)(s.Y,{label:"文档切片大小",placeholder:"",...t.getInputProps("chunk_size")})]})}function C(e){let{form:t}=e;return(0,o.jsxs)(a.x,{maw:v.hE,mx:"auto",children:[(0,o.jsx)(l.o,{withAsterisk:!0,label:"标题",placeholder:"",...t.getInputProps("title")}),(0,o.jsx)(c.g,{withAsterisk:!0,label:"问题",placeholder:"",...t.getInputProps("question")}),(0,o.jsx)(c.g,{withAsterisk:!0,label:"答案",placeholder:"",...t.getInputProps("answer")}),(0,o.jsx)(l.o,{label:"来源url",placeholder:"",...t.getInputProps("url")})]})}function E(){let e=(0,i.useRouter)(),t=(0,w.s6)().open,r=(0,w.s6)().setOpen,n=(0,w.s6)().setLoading,{query:l}=e,c=l.dataSetType,s=l.id,u=(0,b.c)({initialValues:{title:"",content:"",url:"",chunk_size:1024,ext:"txt",tag:s},validate:{title:e=>e?null:"标题必填",content:e=>e?null:"内容必填"}}),p=(0,b.c)({initialValues:{title:"",question:"",answer:"",tag:s,url:""},validate:{title:e=>e?null:"标题必填",question:e=>e?null:"问题必填",answer:e=>e?null:"答案必填"}}),f=c==S.I.DOCUMENT?u:p;return(0,o.jsxs)(d.u,{opened:t,onClose:()=>{r(!1)},title:"创建数据集",centered:!0,children:[c==S.I.DOCUMENT?(0,o.jsx)(z,{form:u}):(0,o.jsx)(C,{form:p}),(0,o.jsx)(a.x,{maw:v.hE,mx:"auto",pt:12,style:{textAlign:"right"},children:(0,o.jsx)(h.z,{onClick:async()=>{if(f.validate(),f.isValid())try{n(!0);let e=f.values;await (0,w.J_)({dataSetId:s,dataSetType:c},e),await (0,w.z9)(s,c)}catch(e){console.log(e)}finally{r(!1),n(!1)}},children:"确认"})})]})}function P(e){let{dataSetId:t,dataSetType:r}=e,i=(0,w.s6)().loading,l=(0,w.s6)().setLoading,c=e=>{let{id:n,title:i}=e;j.qk.openConfirmModal({title:"删除数据集",centered:!0,children:(0,o.jsx)(u.x,{size:"sm",children:(0,o.jsx)(p.y,{highlight:i,children:"确定删除 ".concat(i,"?")})}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),confirmProps:{color:"red"},onConfirm:async()=>{l(!0),await (0,w.xU)({dataSetId:t,dataSetType:r,dataSourceId:n}),await (0,w.z9)(t,r),l(!1)}})},s=[].map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.id}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{style:{width:100,wordBreak:"break-word"},children:e.title})}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{style:{width:200,wordBreak:"break-word"},children:e.url})}),r==S.I.QUESTION?(0,o.jsx)("td",{children:e.question}):null,(0,o.jsx)("td",{children:e.doc_chunk}),(0,o.jsx)("td",{children:e.token_size}),(0,o.jsx)("td",{children:(0,k.o)(e.created)}),(0,o.jsx)("td",{children:(0,k.o)(e.modified)}),(0,o.jsxs)("td",{children:[" ",(0,o.jsx)(h.z,{variant:"filled",color:"red",size:"xs",onClick:()=>c(e),children:"删除"})]})]},e.id));return(0,n.useEffect)(()=>{(0,w.z9)(t,r)},[]),(0,o.jsxs)(a.x,{pos:"relative",children:[(0,o.jsx)(f.f,{visible:i,overlayOpacity:.3}),(0,o.jsxs)(g.i,{striped:!0,withBorder:!0,withColumnBorders:!0,mt:12,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"名称"}),(0,o.jsx)("th",{children:"描述"}),(0,o.jsx)("th",{children:"源访问地址"}),(0,o.jsx)("th",{children:"创建时间"}),(0,o.jsx)("th",{children:"修改时间"}),(0,o.jsx)("th",{children:"操作"})]})}),(0,o.jsx)("tbody",{children:s})]})]})}function T(){let e=(0,i.useRouter)(),{query:t}=e,r=t.dataSetType,n=t.id,l=[{title:"AgentCraft",href:"/"},{title:"LLM工具集",href:"/toolformer"}].map((e,t)=>(0,o.jsx)(x.e,{href:e.href,children:e.title},t));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y.O,{children:l}),(0,o.jsx)(O.Z,{title:"LLM工具集",description:"AgentCraft可以快速构建您业务所需要的工具函数，提供场景模板，快速部署，调试及日志访问能力，通过工具集可以帮助您构建更加强大的Agent服务"}),(0,o.jsx)(a.x,{children:(0,o.jsx)(m.k,{mih:50,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:(0,o.jsx)(h.z,{onClick:()=>e.push("/foundationModel/create"),children:"创建工具函数"})})}),(0,o.jsx)(E,{}),(0,o.jsx)(P,{dataSetId:n,dataSetType:r})]})}function N(){return(0,o.jsx)(T,{})}},99494:function(e,t,r){"use strict";r.d(t,{$s:function(){return d},J_:function(){return s},s6:function(){return a},xU:function(){return c},z9:function(){return l}});var o=r(64529),n=r(782),i=r(71791);let a=(0,o.Ue)()((0,n.mW)(e=>({dataSourceList:[],loading:!1,open:!1,openUploadModel:!1,setLoading:t=>e(e=>({loading:t})),setOpen:t=>e(e=>({open:t})),setOpenUploadModel:t=>e(e=>({openUploadModel:t})),updatedataSourceList:t=>e(e=>({dataSourceList:t}))})));async function l(e,t){let r=a.getState(),o=r.updatedataSourceList,n=await (0,i.W)("/api/dataset/".concat(e,"/datasource/list?dataSetType=").concat(t)),l=n.data;l&&o(l)}async function c(e){let{dataSetId:t,dataSetType:r,dataSourceId:o}=e,n=await (0,i.W)("/api/dataset/".concat(t,"/datasource/delete?dataSetType=").concat(r,"&dataSourceId=").concat(o),{method:"DELETE",headers:{"Content-Type":"application/json"}});await n}async function s(e,t){let{dataSetId:r,dataSetType:o}=e,n=await (0,i.W)("/api/dataset/".concat(r,"/datasource/create?dataSetType=").concat(o),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});await n}async function d(e,t){let{dataSetId:r}=e,o=await (0,i.W)("/api/dataset/".concat(r,"/datasource/upload"),{method:"POST",body:t,headers:{}});await o}},77194:function(e,t,r){"use strict";var o,n;r.d(t,{I:function(){return o}}),(n=o||(o={}))[n.QUESTION=1]="QUESTION",n[n.DOCUMENT=2]="DOCUMENT"},48847:function(e,t,r){"use strict";function o(e){let t=new Date(e),r=t.getFullYear(),o=(1+t.getMonth()).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0"),l=t.getSeconds().toString().padStart(2,"0");return"".concat(r,"-").concat(o,"-").concat(n," ").concat(i,":").concat(a,":").concat(l)}r.d(t,{o:function(){return o}})}},function(e){e.O(0,[121,586,946,774,888,179],function(){return e(e.s=77786)}),_N_E=e.O()}]);