(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{41030:function(e,t,r){"use strict";r.d(t,{S:function(){return M}});var n=r(67294),l=r(15851),o=(0,r(56817).k)(()=>({placeholder:{},input:{cursor:"pointer"}})),a=r(66261),i=r(80971),c=r(94151),s=r(3241),d=r(83979),p=r(80665),u=Object.defineProperty,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&y(e,r,t[r]);if(h)for(var r of h(t))m.call(t,r)&&y(e,r,t[r]);return e},b=(e,t)=>{var r={};for(var n in e)f.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))0>t.indexOf(n)&&m.call(e,n)&&(r[n]=e[n]);return r};let x={multiple:!1},j=(0,n.forwardRef)((e,t)=>{let r=(0,s.N4)("FileButton",x,e),{onChange:l,children:o,multiple:a,accept:i,name:c,form:u,resetRef:h,disabled:f,capture:m,inputProps:y}=r,j=b(r,["onChange","children","multiple","accept","name","form","resetRef","disabled","capture","inputProps"]),v=(0,n.useRef)(),w=()=>{f||v.current.click()},O=e=>{a?l(Array.from(e.currentTarget.files)):l(e.currentTarget.files[0]||null)},k=()=>{v.current.value=""};return(0,d.k)(h,k),n.createElement(n.Fragment,null,o(g({onClick:w},j)),n.createElement("input",g({style:{display:"none"},type:"file",accept:i,multiple:a,onChange:O,ref:(0,p.Y)(t,v),name:c,form:u,capture:m},y)))});j.displayName="@mantine/core/FileButton";var v=r(95117),w=Object.defineProperty,O=Object.defineProperties,k=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&E(e,r,t[r]);if(S)for(var r of S(t))z.call(t,r)&&E(e,r,t[r]);return e},C=(e,t)=>O(e,k(t)),T=(e,t)=>{var r={};for(var n in e)P.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&S)for(var n of S(e))0>t.indexOf(n)&&z.call(e,n)&&(r[n]=e[n]);return r};let N=({value:e})=>n.createElement(v.x,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},Array.isArray(e)?e.map(e=>e.name).join(", "):null==e?void 0:e.name),_={size:"sm",valueComponent:N},A=(0,n.forwardRef)((e,t)=>{let r=(0,a.k)("FileInput",_,e),{inputProps:s,wrapperProps:d,placeholder:p,value:u,defaultValue:h,onChange:f,multiple:m,accept:y,name:g,form:b,classNames:x,styles:v,unstyled:w,valueComponent:O,rightSection:k,clearable:S,clearButtonProps:P,readOnly:z,capture:E,fileInputProps:N}=r,A=T(r,["inputProps","wrapperProps","placeholder","value","defaultValue","onChange","multiple","accept","name","form","classNames","styles","unstyled","valueComponent","rightSection","clearable","clearButtonProps","readOnly","capture","fileInputProps"]),M=(0,n.useRef)(),{classes:U,cx:R}=o(null,{name:"FileInput",classNames:x,styles:v,unstyled:w}),[F,B]=(0,l.C)({value:u,defaultValue:h,onChange:f,finalValue:m?[]:null}),$=Array.isArray(F)?0!==F.length:null!==F,D=k||(S&&$&&!z?n.createElement(i.P,C(I({},P),{variant:"transparent",onClick:()=>B(m?[]:null),size:s.size,unstyled:w})):null);return(0,n.useEffect)(()=>{(Array.isArray(F)&&0===F.length||null===F)&&M.current()},[F]),n.createElement(c.I.Wrapper,C(I({},d),{__staticSelector:"FileInput"}),n.createElement(j,{onChange:B,multiple:m,accept:y,name:g,form:b,resetRef:M,disabled:z,capture:E,inputProps:N},e=>n.createElement(c.I,C(I(I(I({multiline:!0},e),s),A),{component:"button",type:"button",ref:t,__staticSelector:"FileInput",rightSection:D,classNames:C(I({},x),{input:R(U.input,null==x?void 0:x.input)})}),$?n.createElement(O,{value:F}):n.createElement(c.I.Placeholder,{className:U.placeholder},p))))});A.displayName="@mantine/core/FileInput";let M=A},95033:function(e,t,r){"use strict";r.d(t,{y:function(){return E}});var n=r(67294),l=r(3241),o=r(48427),a=r(95117),i=(0,r(56817).k)((e,{color:t})=>({root:{backgroundColor:e.fn.themeColor(t,"dark"===e.colorScheme?5:2),color:"dark"===e.colorScheme?e.colors.dark[9]:"inherit"}})),c=r(64523),s=Object.defineProperty,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(d)for(var r of d(t))u.call(t,r)&&h(e,r,t[r]);return e},m=(e,t)=>{var r={};for(var n in e)p.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&d)for(var n of d(e))0>t.indexOf(n)&&u.call(e,n)&&(r[n]=e[n]);return r};let y={color:"yellow"},g=(0,n.forwardRef)((e,t)=>{let r=(0,l.N4)("Mark",y,e),{color:o,className:a,unstyled:s,variant:d}=r,p=m(r,["color","className","unstyled","variant"]),{classes:u,cx:h}=i({color:o},{unstyled:s,name:"Mark",variant:d});return n.createElement(c.x,f({component:"mark",ref:t,className:h(u.root,a)},p))});function b(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}g.displayName="@mantine/core/Mark";var x=Object.defineProperty,j=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&O(e,r,t[r]);if(j)for(var r of j(t))w.call(t,r)&&O(e,r,t[r]);return e},S=(e,t)=>{var r={};for(var n in e)v.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&j)for(var n of j(e))0>t.indexOf(n)&&w.call(e,n)&&(r[n]=e[n]);return r};let P={highlightColor:"yellow"},z=(0,n.forwardRef)((e,t)=>{let r=(0,l.N4)("Highlight",P,e),{children:o,highlight:i,highlightColor:c,highlightStyles:s,unstyled:d}=r,p=S(r,["children","highlight","highlightColor","highlightStyles","unstyled"]),u=function(e,t){if(null==t)return[{chunk:e,highlighted:!1}];let r=Array.isArray(t)?t.map(b):b(t),n=Array.isArray(r)?r.filter(e=>e.trim().length>0).length>0:""!==r.trim();if(!n)return[{chunk:e,highlighted:!1}];let l="string"==typeof r?r.trim():r.filter(e=>0!==e.trim().length).map(e=>e.trim()).join("|"),o=RegExp(`(${l})`,"gi"),a=e.split(o).map(e=>({chunk:e,highlighted:o.test(e)})).filter(({chunk:e})=>e);return a}(o,i);return n.createElement(a.x,k({unstyled:d,ref:t,__staticSelector:"Highlight"},p),u.map(({chunk:e,highlighted:t},r)=>t?n.createElement(g,{unstyled:d,key:r,color:c,sx:s,"data-highlight":e},e):n.createElement("span",{key:r},e)))});z.displayName="@mantine/core/Highlight";let E=(0,o.F)(z)},95078:function(e,t,r){"use strict";r.d(t,{i:function(){return C}});var n=r(67294),l=r(3241),o=r(56817),a=r(96768),i=r(14258),c=Object.defineProperty,s=Object.defineProperties,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&f(e,r,t[r]);if(p)for(var r of p(t))h.call(t,r)&&f(e,r,t[r]);return e},y=(e,t)=>s(e,d(t)),g=(0,o.k)((e,{captionSide:t,horizontalSpacing:r,verticalSpacing:n,fontSize:l,withBorder:o,withColumnBorders:c})=>{let s=`${(0,a.h)(1)} solid ${"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[3]}`;return{root:y(m({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:o?s:void 0,"& caption":{marginTop:"top"===t?0:e.spacing.xs,marginBottom:"bottom"===t?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:"dark"===e.colorScheme?e.colors.dark[0]:e.colors.gray[7],fontSize:(0,i.a)({size:l,sizes:e.fontSizes}),padding:`${(0,i.a)({size:n,sizes:e.spacing})} ${(0,i.a)({size:r,sizes:e.spacing})}`},"& thead tr th":{borderBottom:s},"& tfoot tr th, & tbody tr th":{borderTop:s},"& tbody tr td":{padding:`${(0,i.a)({size:n,sizes:e.spacing})} ${(0,i.a)({size:r,sizes:e.spacing})}`,borderTop:s,fontSize:(0,i.a)({size:l,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:c?s:"none","&:last-of-type":{borderRight:"none",borderLeft:c?s:"none"}},"& tbody tr th":{borderRight:c?s:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[1]})})}}),b=r(64523),x=Object.defineProperty,j=Object.defineProperties,v=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&S(e,r,t[r]);if(w)for(var r of w(t))k.call(t,r)&&S(e,r,t[r]);return e},z=(e,t)=>j(e,v(t)),E=(e,t)=>{var r={};for(var n in e)O.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&w)for(var n of w(e))0>t.indexOf(n)&&k.call(e,n)&&(r[n]=e[n]);return r};let I={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},C=(0,n.forwardRef)((e,t)=>{let r=(0,l.N4)("Table",I,e),{className:o,children:a,striped:i,highlightOnHover:c,captionSide:s,horizontalSpacing:d,verticalSpacing:p,fontSize:u,unstyled:h,withBorder:f,withColumnBorders:m,variant:y}=r,x=E(r,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:j,cx:v}=g({captionSide:s,verticalSpacing:p,horizontalSpacing:d,fontSize:u,withBorder:f,withColumnBorders:m},{unstyled:h,name:"Table",variant:y});return n.createElement(b.x,z(P({},x),{component:"table",ref:t,className:v(j.root,o),"data-striped":i||void 0,"data-hover":c||void 0}),a)});C.displayName="@mantine/core/Table"},30904:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n=(0,r(30853).Z)("upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]])},90939:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[id]/datasource",function(){return r(22889)}])},30372:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(85893),l=r(67294),o=r(55652),a=r(69876),i=r(95117),c=r(49834),s=r(88198),d=r(93625),p=r(37044),u=r.n(p);function h(e){let{value:t,content:r,truncate:p,width:h=300}=e,f=function(){let{timeout:e=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,r]=(0,l.useState)(null),[n,o]=(0,l.useState)(!1),[a,i]=(0,l.useState)(null),c=t=>{clearTimeout(a),i(setTimeout(()=>o(!1),e)),o(t)},s=e=>{if("clipboard"in navigator)navigator.clipboard.writeText(e).then(()=>c(!0)).catch(e=>r(e));else{let t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-999999px",document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}finally{t.remove(),c(!0)}}},d=()=>{o(!1),r(null),clearTimeout(a)};return{copy:s,reset:d,error:t,copied:n}}({timeout:500});return(0,n.jsx)(o.u,{label:f.copied?"已复制":"复制",withArrow:!0,position:"right",children:(0,n.jsxs)(a.k,{onClick:()=>f.copy(t),mih:50,style:{width:h},gap:"xs",justify:"flex-start",align:"center",direction:"row",wrap:"nowrap",children:[r?(0,n.jsx)(i.x,{truncate:p,className:u()["copy-to-clipboard-content"],children:r}):null,(0,n.jsx)(c.A,{color:f.copied?"teal":"gray",children:f.copied?(0,n.jsx)(s.Z,{size:"1rem"}):(0,n.jsx)(d.Z,{size:"1rem"})})]})})}},22889:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return V},default:function(){return q}});var n=r(85893),l=r(67294),o=r(11163),a=r(64523),i=r(80061),c=r(52615),s=r(14127),d=r(94491),p=r(67841),u=r(41030),h=r(96768),f=r(95117),m=r(95033),y=r(95078),g=r(54685),b=r(93284),x=r(69876),j=r(3241),v=Object.defineProperty,w=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&S(e,r,t[r]);if(w)for(var r of w(t))k.call(t,r)&&S(e,r,t[r]);return e},z=(e,t)=>{var r={};for(var n in e)O.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&w)for(var n of w(e))0>t.indexOf(n)&&k.call(e,n)&&(r[n]=e[n]);return r};let E={w:0,h:0},I=(0,l.forwardRef)((e,t)=>{let r=(0,j.N4)("Space",E,e),{w:n,h:o}=r,i=z(r,["w","h"]);return l.createElement(a.x,P({ref:t,w:n,miw:n,h:o,mih:o},i))});I.displayName="@mantine/core/Space";var C=r(49737),T=r(77248),N=r(73344),_=r(30372),A=r(30904),M=(0,r(30853).Z)("file-upload","IconFileUpload",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M12 11v6",key:"svg-2"}],["path",{d:"M9.5 13.5l2.5 -2.5l2.5 2.5",key:"svg-3"}]]),U=r(99494),R=r(77194),F=r(48847),B=r(61407);function $(e){let{form:t}=e;return(0,n.jsxs)(a.x,{maw:B.hE,mx:"auto",children:[(0,n.jsx)(i.o,{withAsterisk:!0,label:"标题",placeholder:"",...t.getInputProps("title")}),(0,n.jsx)(c.g,{withAsterisk:!0,label:"内容",placeholder:"",...t.getInputProps("content")}),(0,n.jsx)(i.o,{label:"来源url",placeholder:"",...t.getInputProps("url")}),(0,n.jsx)(s.Y,{label:"文档切片大小",placeholder:"",...t.getInputProps("chunk_size")})]})}function D(e){let{form:t}=e;return(0,n.jsxs)(a.x,{maw:B.hE,mx:"auto",children:[(0,n.jsx)(i.o,{withAsterisk:!0,label:"标题",placeholder:"",...t.getInputProps("title")}),(0,n.jsx)(c.g,{withAsterisk:!0,label:"问题",placeholder:"",...t.getInputProps("question")}),(0,n.jsx)(c.g,{withAsterisk:!0,label:"答案",placeholder:"",...t.getInputProps("answer")}),(0,n.jsx)(i.o,{label:"来源url",placeholder:"",...t.getInputProps("url")})]})}function L(){let e=(0,o.useRouter)(),t=(0,U.s6)().open,r=(0,U.s6)().setOpen,l=(0,U.s6)().setLoading,{query:i}=e,c=i.dataSetType,s=i.id,u=(0,T.c)({initialValues:{title:"",content:"",url:"",chunk_size:1024,ext:"txt",tag:s},validate:{title:e=>e?null:"标题必填",content:e=>e?null:"内容必填"}}),h=(0,T.c)({initialValues:{title:"",question:"",answer:"",tag:s,url:""},validate:{title:e=>e?null:"标题必填",question:e=>e?null:"问题必填",answer:e=>e?null:"答案必填"}}),f=c==R.I.DOCUMENT?u:h;return(0,n.jsxs)(d.u,{opened:t,onClose:()=>{r(!1)},title:"创建数据集",centered:!0,children:[c==R.I.DOCUMENT?(0,n.jsx)($,{form:u}):(0,n.jsx)(D,{form:h}),(0,n.jsx)(a.x,{maw:B.hE,mx:"auto",pt:12,style:{textAlign:"right"},children:(0,n.jsx)(p.z,{onClick:async()=>{if(f.validate(),f.isValid())try{l(!0);let e=f.values;await (0,U.J_)({dataSetId:s,dataSetType:c},e),await (0,U.z9)(s,c)}catch(e){console.log(e)}finally{r(!1),l(!1)}},children:"确认"})})]})}function Z(){let e=(0,o.useRouter)(),t=(0,U.s6)().openUploadModel,r=(0,U.s6)().setOpenUploadModel,l=(0,U.s6)().setLoading,{query:c}=e,f=c.dataSetType,m=c.id,y=(0,T.c)({initialValues:{title:"",url:"",chunk_size:512,ext:"txt",tag:m},validate:{title:e=>e?null:"标题必填"}});return(0,n.jsxs)(d.u,{opened:t,onClose:()=>{r(!1)},title:"上传数据集文档",centered:!0,children:[(0,n.jsx)(u.S,{withAsterisk:!0,accept:".md,.txt,.html,.pdf",name:"file",label:"选择文档",description:"选择本地文件上传，支持 .txt,.md,.html文件",placeholder:"点击上传文档",icon:(0,n.jsx)(A.Z,{size:(0,h.h)(14)}),...y.getInputProps("file")}),(0,n.jsx)(i.o,{withAsterisk:!0,label:"标题",description:"标题内容作为检索的数据来源，用来展示检索结果",placeholder:"",...y.getInputProps("title")}),(0,n.jsx)(s.Y,{withAsterisk:!0,label:"文档切片大小",description:"",placeholder:"",...y.getInputProps("chunk_size")}),(0,n.jsx)(i.o,{label:"来源url",placeholder:"",...y.getInputProps("url")}),(0,n.jsx)(a.x,{maw:B.hE,mx:"auto",pt:12,style:{textAlign:"right"},children:(0,n.jsx)(p.z,{onClick:async()=>{if(y.validate(),y.isValid())try{l(!0);let e=await y.values,t=new FormData;t.append("file",e.file),t.append("title",e.title),t.append("chunk_size",e.chunk_size),t.append("url",e.url),await (0,U.$s)({dataSetId:m},t),await (0,U.z9)(m,f)}catch(e){console.log(e)}finally{r(!1),l(!1)}},children:"确认"})})]})}function W(e){let{dataSetId:t,dataSetType:r}=e,o=(0,U.s6)().dataSourceList,a=(0,U.s6)().setLoading,i=e=>{let{id:l,title:o}=e;N.qk.openConfirmModal({title:"删除数据集",centered:!0,children:(0,n.jsx)(f.x,{size:"sm",children:(0,n.jsx)(m.y,{highlight:o,children:"确定删除 ".concat(o,"?")})}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),confirmProps:{color:"red"},onConfirm:async()=>{a(!0),await (0,U.xU)({dataSetId:t,dataSetType:r,dataSourceId:l}),await (0,U.z9)(t,r),a(!1)}})},c=o.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.title}),(0,n.jsx)("td",{children:(0,n.jsx)(_.Z,{value:e.url,content:e.url,truncate:!0})}),r==R.I.QUESTION?(0,n.jsx)("td",{children:(0,n.jsx)(_.Z,{value:e.question,content:e.question,truncate:!0})}):null,(0,n.jsx)("td",{children:(0,n.jsx)(_.Z,{value:e.doc_chunk,content:e.doc_chunk})}),(0,n.jsx)("td",{children:(0,F.o0)(e.created)}),(0,n.jsx)("td",{children:(0,F.o0)(e.modified)}),(0,n.jsxs)("td",{children:[" ",(0,n.jsx)(p.z,{variant:"filled",color:"red",size:"xs",onClick:()=>i(e),children:"删除"})]})]},e.id)),s=async()=>{a(!0);try{await (0,U.z9)(t,r)}catch(e){}a(!1)};return(0,l.useEffect)(()=>{s()},[t,r]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["共计",o.length,"条数据"]}),(0,n.jsxs)(y.i,{striped:!0,withBorder:!0,withColumnBorders:!0,mt:12,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"编号"}),(0,n.jsx)("th",{children:"标题"}),(0,n.jsx)("th",{children:"源访问地址"}),r==R.I.QUESTION?(0,n.jsx)("th",{children:"问题"}):null,(0,n.jsx)("th",{children:r==R.I.QUESTION?"答案":"文档内容"}),(0,n.jsx)("th",{children:"创建时间"}),(0,n.jsx)("th",{children:"修改时间"}),(0,n.jsx)("th",{children:"操作"})]})}),(0,n.jsx)("tbody",{children:c})]})]})}function H(){let e=(0,o.useRouter)(),{query:t}=e,r=t.dataSetType,l=t.id,i=[{title:"AgentCraft",href:"/"},{title:"数据集",href:"/dataset"},{title:"数据源",href:"/dataset/".concat(l,"/datasource")}].map((e,t)=>(0,n.jsx)(g.e,{href:e.href,children:e.title},t)),c=(0,U.s6)().loading,s=(0,U.s6)().setOpen,d=(0,U.s6)().setOpenUploadModel;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.O,{children:i}),(0,n.jsx)(a.x,{mt:12,children:(0,n.jsxs)(x.k,{mih:50,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:[(0,n.jsx)(p.z,{onClick:()=>s(!0),children:"新建单条数据源"}),(0,n.jsx)(I,{h:"md"}),r==R.I.DOCUMENT?(0,n.jsx)(p.z,{onClick:()=>d(!0),variant:"filled",leftIcon:(0,n.jsx)(M,{size:"1rem"}),children:"上传文件"}):null]})}),(0,n.jsxs)(a.x,{children:[(0,n.jsx)(C.f,{visible:c,overlayOpacity:.3}),(0,n.jsx)(L,{}),(0,n.jsx)(Z,{}),(0,n.jsx)(W,{dataSetId:l,dataSetType:r})]})]})}var V=!0;function q(){return(0,n.jsx)(H,{})}},99494:function(e,t,r){"use strict";r.d(t,{$s:function(){return d},J_:function(){return s},s6:function(){return a},xU:function(){return c},z9:function(){return i}});var n=r(64529),l=r(782),o=r(71791);let a=(0,n.Ue)()((0,l.mW)(e=>({dataSourceList:[],loading:!1,open:!1,openUploadModel:!1,setLoading:t=>e(e=>({loading:t})),setOpen:t=>e(e=>({open:t})),setOpenUploadModel:t=>e(e=>({openUploadModel:t})),updatedataSourceList:t=>e(e=>({dataSourceList:t}))})));async function i(e,t){let r=a.getState(),n=r.updatedataSourceList,l=await (0,o.W)("/api/dataset/".concat(e,"/datasource/list?dataSetType=").concat(t)),i=l.data;i&&n(i)}async function c(e){let{dataSetId:t,dataSetType:r,dataSourceId:n}=e,l=await (0,o.W)("/api/dataset/".concat(t,"/datasource/delete?dataSetType=").concat(r,"&dataSourceId=").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json"}});await l}async function s(e,t){let{dataSetId:r,dataSetType:n}=e,l=await (0,o.W)("/api/dataset/".concat(r,"/datasource/create?dataSetType=").concat(n),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});await l}async function d(e,t){let{dataSetId:r}=e,n=await (0,o.W)("/api/dataset/".concat(r,"/datasource/upload"),{method:"POST",body:t,headers:{}});await n}},77194:function(e,t,r){"use strict";var n,l;r.d(t,{I:function(){return n}}),(l=n||(n={}))[l.QUESTION=1]="QUESTION",l[l.DOCUMENT=2]="DOCUMENT"},37044:function(e){e.exports={"copy-to-clipboard-content":"CopyToClipboard_copy-to-clipboard-content__fv4wW"}}},function(e){e.O(0,[871,754,322,774,888,179],function(){return e(e.s=90939)}),_N_E=e.O()}]);