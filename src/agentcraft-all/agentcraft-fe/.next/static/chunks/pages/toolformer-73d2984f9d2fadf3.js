(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{93284:function(e,t,r){"use strict";r.d(t,{O:function(){return y}});var o=r(67294),n=r(3241),a=r(24241),l=(0,r(56817).k)(e=>({root:{display:"flex",alignItems:"center"},breadcrumb:{lineHeight:1,whiteSpace:"nowrap",WebkitTapHighlightColor:"transparent"},separator:{marginLeft:e.spacing.xs,marginRight:e.spacing.xs,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[7],lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center"}})),i=r(95117),s=r(64523),c=Object.defineProperty,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&u(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&u(e,r,t[r]);return e},g=(e,t)=>{var r={};for(var o in e)h.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&d)for(var o of d(e))0>t.indexOf(o)&&p.call(e,o)&&(r[o]=e[o]);return r};let m={separator:"/"},y=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Breadcrumbs",m,e),{className:c,children:d,separator:h,classNames:p,styles:u,unstyled:y,variant:x}=r,b=g(r,["className","children","separator","classNames","styles","unstyled","variant"]),{classes:j,cx:w}=l(null,{classNames:p,styles:u,unstyled:y,name:"Breadcrumbs",variant:x}),O=o.Children.toArray(d).reduce((e,t,r,n)=>{var l;let s=(0,a.k)(t)?o.cloneElement(t,{className:w(j.breadcrumb,null==(l=t.props)?void 0:l.className),key:r}):o.createElement("div",{className:j.breadcrumb,key:r},t);return e.push(s),r!==n.length-1&&e.push(o.createElement(i.x,{size:"sm",className:j.separator,key:`separator-${r}`},h)),e},[]);return o.createElement(s.x,f({className:w(j.root,c),ref:t},b),O)});y.displayName="@mantine/core/Breadcrumbs"},95033:function(e,t,r){"use strict";r.d(t,{y:function(){return E}});var o=r(67294),n=r(3241),a=r(48427),l=r(95117),i=(0,r(56817).k)((e,{color:t})=>({root:{backgroundColor:e.fn.themeColor(t,"dark"===e.colorScheme?5:2),color:"dark"===e.colorScheme?e.colors.dark[9]:"inherit"}})),s=r(64523),c=Object.defineProperty,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&u(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&u(e,r,t[r]);return e},g=(e,t)=>{var r={};for(var o in e)h.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&d)for(var o of d(e))0>t.indexOf(o)&&p.call(e,o)&&(r[o]=e[o]);return r};let m={color:"yellow"},y=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Mark",m,e),{color:a,className:l,unstyled:c,variant:d}=r,h=g(r,["color","className","unstyled","variant"]),{classes:p,cx:u}=i({color:a},{unstyled:c,name:"Mark",variant:d});return o.createElement(s.x,f({component:"mark",ref:t,className:u(p.root,l)},h))});function x(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}y.displayName="@mantine/core/Mark";var b=Object.defineProperty,j=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&k(e,r,t[r]);if(j)for(var r of j(t))O.call(t,r)&&k(e,r,t[r]);return e},S=(e,t)=>{var r={};for(var o in e)w.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&j)for(var o of j(e))0>t.indexOf(o)&&O.call(e,o)&&(r[o]=e[o]);return r};let z={highlightColor:"yellow"},C=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Highlight",z,e),{children:a,highlight:i,highlightColor:s,highlightStyles:c,unstyled:d}=r,h=S(r,["children","highlight","highlightColor","highlightStyles","unstyled"]),p=function(e,t){if(null==t)return[{chunk:e,highlighted:!1}];let r=Array.isArray(t)?t.map(x):x(t),o=Array.isArray(r)?r.filter(e=>e.trim().length>0).length>0:""!==r.trim();if(!o)return[{chunk:e,highlighted:!1}];let n="string"==typeof r?r.trim():r.filter(e=>0!==e.trim().length).map(e=>e.trim()).join("|"),a=RegExp(`(${n})`,"gi"),l=e.split(a).map(e=>({chunk:e,highlighted:a.test(e)})).filter(({chunk:e})=>e);return l}(a,i);return o.createElement(l.x,v({unstyled:d,ref:t,__staticSelector:"Highlight"},h),p.map(({chunk:e,highlighted:t},r)=>t?o.createElement(y,{unstyled:d,key:r,color:s,sx:c,"data-highlight":e},e):o.createElement("span",{key:r},e)))});C.displayName="@mantine/core/Highlight";let E=(0,a.F)(C)},95078:function(e,t,r){"use strict";r.d(t,{i:function(){return P}});var o=r(67294),n=r(3241),a=r(56817),l=r(96768),i=r(14258),s=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))u.call(t,r)&&f(e,r,t[r]);return e},m=(e,t)=>c(e,d(t)),y=(0,a.k)((e,{captionSide:t,horizontalSpacing:r,verticalSpacing:o,fontSize:n,withBorder:a,withColumnBorders:s})=>{let c=`${(0,l.h)(1)} solid ${"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[3]}`;return{root:m(g({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:a?c:void 0,"& caption":{marginTop:"top"===t?0:e.spacing.xs,marginBottom:"bottom"===t?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:"dark"===e.colorScheme?e.colors.dark[0]:e.colors.gray[7],fontSize:(0,i.a)({size:n,sizes:e.fontSizes}),padding:`${(0,i.a)({size:o,sizes:e.spacing})} ${(0,i.a)({size:r,sizes:e.spacing})}`},"& thead tr th":{borderBottom:c},"& tfoot tr th, & tbody tr th":{borderTop:c},"& tbody tr td":{padding:`${(0,i.a)({size:o,sizes:e.spacing})} ${(0,i.a)({size:r,sizes:e.spacing})}`,borderTop:c,fontSize:(0,i.a)({size:n,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:s?c:"none","&:last-of-type":{borderRight:"none",borderLeft:s?c:"none"}},"& tbody tr th":{borderRight:s?c:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[1]})})}}),x=r(64523),b=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&S(e,r,t[r]);if(O)for(var r of O(t))v.call(t,r)&&S(e,r,t[r]);return e},C=(e,t)=>j(e,w(t)),E=(e,t)=>{var r={};for(var o in e)k.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&O)for(var o of O(e))0>t.indexOf(o)&&v.call(e,o)&&(r[o]=e[o]);return r};let N={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},P=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Table",N,e),{className:a,children:l,striped:i,highlightOnHover:s,captionSide:c,horizontalSpacing:d,verticalSpacing:h,fontSize:p,unstyled:u,withBorder:f,withColumnBorders:g,variant:m}=r,b=E(r,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:j,cx:w}=y({captionSide:c,verticalSpacing:h,horizontalSpacing:d,fontSize:p,withBorder:f,withColumnBorders:g},{unstyled:u,name:"Table",variant:m});return o.createElement(x.x,C(z({},b),{component:"table",ref:t,className:w(j.root,a),"data-striped":i||void 0,"data-hover":s||void 0}),l)});P.displayName="@mantine/core/Table"},77786:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/toolformer",function(){return r(57075)}])},3658:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var o=r(85893),n=r(92716),a=r(95117),l=r(64523),i=r(69876),s=r(19236),c=r(91759);function d(e){let{detail:t,title:r}=e,[l,{open:i,close:s}]=(0,c.q)(!1);return(0,o.jsx)(o.Fragment,{children:t?(0,o.jsxs)("div",{children:[(0,o.jsx)(n.d,{opened:l,onClose:s,title:r,children:(0,o.jsx)(a.x,{children:t})}),(0,o.jsx)(a.x,{onClick:()=>i(),children:"信息"})]}):null})}function h(e){let{title:t,description:r,detail:n,mt:c,mb:h}=e;return(0,o.jsxs)(l.x,{mt:c||24,mb:h||24,children:[(0,o.jsxs)(i.k,{mih:20,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:[(0,o.jsx)(s.D,{order:2,children:t}),(0,o.jsx)(d,{title:t,detail:n})]}),r?(0,o.jsx)(a.x,{lineClamp:4,children:r}):null]})}},57075:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var o=r(85893),n=r(67294),a=r(11163),l=r(64523),i=r(80061),s=r(52615),c=r(14127),d=r(94491),h=r(67841),p=r(95117),u=r(95033),f=r(49737),g=r(95078),m=r(54685),y=r(93284),x=r(69876),b=r(77248),j=r(73344),w=r(99494),O=r(77194),k=r(3658),v=r(48847),S=r(61407);function z(e){let{form:t}=e;return(0,o.jsxs)(l.x,{maw:S.hE,mx:"auto",children:[(0,o.jsx)(i.o,{withAsterisk:!0,label:"标题",placeholder:"",...t.getInputProps("title")}),(0,o.jsx)(s.g,{withAsterisk:!0,label:"内容",placeholder:"",...t.getInputProps("content")}),(0,o.jsx)(i.o,{label:"来源url",placeholder:"",...t.getInputProps("url")}),(0,o.jsx)(c.Y,{label:"文档切片大小",placeholder:"",...t.getInputProps("chunk_size")})]})}function C(e){let{form:t}=e;return(0,o.jsxs)(l.x,{maw:S.hE,mx:"auto",children:[(0,o.jsx)(i.o,{withAsterisk:!0,label:"标题",placeholder:"",...t.getInputProps("title")}),(0,o.jsx)(s.g,{withAsterisk:!0,label:"问题",placeholder:"",...t.getInputProps("question")}),(0,o.jsx)(s.g,{withAsterisk:!0,label:"答案",placeholder:"",...t.getInputProps("answer")}),(0,o.jsx)(i.o,{label:"来源url",placeholder:"",...t.getInputProps("url")})]})}function E(){let e=(0,a.useRouter)(),t=(0,w.s6)().open,r=(0,w.s6)().setOpen,n=(0,w.s6)().setLoading,{query:i}=e,s=i.dataSetType,c=i.id,p=(0,b.c)({initialValues:{title:"",content:"",url:"",chunk_size:1024,ext:"txt",tag:c},validate:{title:e=>e?null:"标题必填",content:e=>e?null:"内容必填"}}),u=(0,b.c)({initialValues:{title:"",question:"",answer:"",tag:c,url:""},validate:{title:e=>e?null:"标题必填",question:e=>e?null:"问题必填",answer:e=>e?null:"答案必填"}}),f=s==O.I.DOCUMENT?p:u;return(0,o.jsxs)(d.u,{opened:t,onClose:()=>{r(!1)},title:"创建数据集",centered:!0,children:[s==O.I.DOCUMENT?(0,o.jsx)(z,{form:p}):(0,o.jsx)(C,{form:u}),(0,o.jsx)(l.x,{maw:S.hE,mx:"auto",pt:12,style:{textAlign:"right"},children:(0,o.jsx)(h.z,{onClick:async()=>{if(f.validate(),f.isValid())try{n(!0);let e=f.values;await (0,w.J_)({dataSetId:c,dataSetType:s},e),await (0,w.z9)(c,s)}catch(e){console.log(e)}finally{r(!1),n(!1)}},children:"确认"})})]})}function N(e){let{dataSetId:t,dataSetType:r}=e,a=(0,w.s6)().loading,i=(0,w.s6)().setLoading,s=e=>{let{id:n,title:a}=e;j.qk.openConfirmModal({title:"删除数据集",centered:!0,children:(0,o.jsx)(p.x,{size:"sm",children:(0,o.jsx)(u.y,{highlight:a,children:"确定删除 ".concat(a,"?")})}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),confirmProps:{color:"red"},onConfirm:async()=>{i(!0),await (0,w.xU)({dataSetId:t,dataSetType:r,dataSourceId:n}),await (0,w.z9)(t,r),i(!1)}})},c=[].map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.id}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{style:{width:100,wordBreak:"break-word"},children:e.title})}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{style:{width:200,wordBreak:"break-word"},children:e.url})}),r==O.I.QUESTION?(0,o.jsx)("td",{children:e.question}):null,(0,o.jsx)("td",{children:e.doc_chunk}),(0,o.jsx)("td",{children:e.token_size}),(0,o.jsx)("td",{children:(0,v.o0)(e.created)}),(0,o.jsx)("td",{children:(0,v.o0)(e.modified)}),(0,o.jsxs)("td",{children:[" ",(0,o.jsx)(h.z,{variant:"filled",color:"red",size:"xs",onClick:()=>s(e),children:"删除"})]})]},e.id));return(0,n.useEffect)(()=>{(0,w.z9)(t,r)},[]),(0,o.jsxs)(l.x,{pos:"relative",children:[(0,o.jsx)(f.f,{visible:a,overlayOpacity:.3}),(0,o.jsxs)(g.i,{striped:!0,withBorder:!0,withColumnBorders:!0,mt:12,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"名称"}),(0,o.jsx)("th",{children:"描述"}),(0,o.jsx)("th",{children:"源访问地址"}),(0,o.jsx)("th",{children:"创建时间"}),(0,o.jsx)("th",{children:"修改时间"}),(0,o.jsx)("th",{children:"操作"})]})}),(0,o.jsx)("tbody",{children:c})]})]})}function P(){let e=(0,a.useRouter)(),{query:t}=e,r=t.dataSetType,n=t.id,i=[{title:"AgentCraft",href:"/"},{title:"LLM工具集",href:"/toolformer"}].map((e,t)=>(0,o.jsx)(m.e,{href:e.href,children:e.title},t));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y.O,{children:i}),(0,o.jsx)(k.Z,{title:"LLM工具集",description:"AgentCraft可以快速构建您业务所需要的工具函数，提供场景模板，快速部署，调试及日志访问能力，通过工具集可以帮助您构建更加强大的Agent服务"}),(0,o.jsx)(l.x,{children:(0,o.jsx)(x.k,{mih:50,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:(0,o.jsx)(h.z,{onClick:()=>e.push("/foundationModel/create"),children:"创建工具函数"})})}),(0,o.jsx)(E,{}),(0,o.jsx)(N,{dataSetId:n,dataSetType:r})]})}function T(){return(0,o.jsx)(P,{})}},99494:function(e,t,r){"use strict";r.d(t,{$s:function(){return d},J_:function(){return c},s6:function(){return l},xU:function(){return s},z9:function(){return i}});var o=r(64529),n=r(782),a=r(71791);let l=(0,o.Ue)()((0,n.mW)(e=>({dataSourceList:[],loading:!1,open:!1,openUploadModel:!1,setLoading:t=>e(e=>({loading:t})),setOpen:t=>e(e=>({open:t})),setOpenUploadModel:t=>e(e=>({openUploadModel:t})),updatedataSourceList:t=>e(e=>({dataSourceList:t}))})));async function i(e,t){let r=l.getState(),o=r.updatedataSourceList,n=await (0,a.W)("/api/dataset/".concat(e,"/datasource/list?dataSetType=").concat(t)),i=n.data;i&&o(i)}async function s(e){let{dataSetId:t,dataSetType:r,dataSourceId:o}=e,n=await (0,a.W)("/api/dataset/".concat(t,"/datasource/delete?dataSetType=").concat(r,"&dataSourceId=").concat(o),{method:"DELETE",headers:{"Content-Type":"application/json"}});await n}async function c(e,t){let{dataSetId:r,dataSetType:o}=e,n=await (0,a.W)("/api/dataset/".concat(r,"/datasource/create?dataSetType=").concat(o),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});await n}async function d(e,t){let{dataSetId:r}=e,o=await (0,a.W)("/api/dataset/".concat(r,"/datasource/upload"),{method:"POST",body:t,headers:{}});await o}},77194:function(e,t,r){"use strict";var o,n;r.d(t,{I:function(){return o}}),(n=o||(o={}))[n.QUESTION=1]="QUESTION",n[n.DOCUMENT=2]="DOCUMENT"}},function(e){e.O(0,[754,774,888,179],function(){return e(e.s=77786)}),_N_E=e.O()}]);