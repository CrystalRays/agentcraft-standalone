(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{95033:function(e,t,r){"use strict";r.d(t,{y:function(){return _}});var o=r(67294),n=r(3241),l=r(48427),i=r(95117),a=(0,r(56817).k)((e,{color:t})=>({root:{backgroundColor:e.fn.themeColor(t,"dark"===e.colorScheme?5:2),color:"dark"===e.colorScheme?e.colors.dark[9]:"inherit"}})),s=r(64523),d=Object.defineProperty,c=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&__defNormalProp(e,r,t[r]);if(c)for(var r of c(t))h.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__objRest=(e,t)=>{var r={};for(var o in e)p.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&c)for(var o of c(e))0>t.indexOf(o)&&h.call(e,o)&&(r[o]=e[o]);return r};let u={color:"yellow"},f=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Mark",u,e),{color:l,className:i,unstyled:d,variant:c}=r,p=__objRest(r,["color","className","unstyled","variant"]),{classes:h,cx:f}=a({color:l},{unstyled:d,name:"Mark",variant:c});return o.createElement(s.x,__spreadValues({component:"mark",ref:t,className:f(h.root,i)},p))});function escapeRegex(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}f.displayName="@mantine/core/Mark";var m=Object.defineProperty,g=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,Highlight_defNormalProp=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Highlight_spreadValues=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&Highlight_defNormalProp(e,r,t[r]);if(g)for(var r of g(t))y.call(t,r)&&Highlight_defNormalProp(e,r,t[r]);return e},Highlight_objRest=(e,t)=>{var r={};for(var o in e)x.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&g)for(var o of g(e))0>t.indexOf(o)&&y.call(e,o)&&(r[o]=e[o]);return r};let b={highlightColor:"yellow"},j=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Highlight",b,e),{children:l,highlight:a,highlightColor:s,highlightStyles:d,unstyled:c}=r,p=Highlight_objRest(r,["children","highlight","highlightColor","highlightStyles","unstyled"]),h=function(e,t){if(null==t)return[{chunk:e,highlighted:!1}];let r=Array.isArray(t)?t.map(escapeRegex):escapeRegex(t),o=Array.isArray(r)?r.filter(e=>e.trim().length>0).length>0:""!==r.trim();if(!o)return[{chunk:e,highlighted:!1}];let n="string"==typeof r?r.trim():r.filter(e=>0!==e.trim().length).map(e=>e.trim()).join("|"),l=RegExp(`(${n})`,"gi"),i=e.split(l).map(e=>({chunk:e,highlighted:l.test(e)})).filter(({chunk:e})=>e);return i}(l,a);return o.createElement(i.x,Highlight_spreadValues({unstyled:c,ref:t,__staticSelector:"Highlight"},p),h.map(({chunk:e,highlighted:t},r)=>t?o.createElement(f,{unstyled:c,key:r,color:s,sx:d,"data-highlight":e},e):o.createElement("span",{key:r},e)))});j.displayName="@mantine/core/Highlight";let _=(0,l.F)(j)},95078:function(e,t,r){"use strict";r.d(t,{i:function(){return v}});var o=r(67294),n=r(3241),l=r(56817),i=r(96768),a=r(14258),s=Object.defineProperty,d=Object.defineProperties,c=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&__defNormalProp(e,r,t[r]);if(p)for(var r of p(t))u.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>d(e,c(t)),f=(0,l.k)((e,{captionSide:t,horizontalSpacing:r,verticalSpacing:o,fontSize:n,withBorder:l,withColumnBorders:s})=>{let d=`${(0,i.h)(1)} solid ${"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[3]}`;return{root:__spreadProps(__spreadValues({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:l?d:void 0,"& caption":{marginTop:"top"===t?0:e.spacing.xs,marginBottom:"bottom"===t?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:"dark"===e.colorScheme?e.colors.dark[0]:e.colors.gray[7],fontSize:(0,a.a)({size:n,sizes:e.fontSizes}),padding:`${(0,a.a)({size:o,sizes:e.spacing})} ${(0,a.a)({size:r,sizes:e.spacing})}`},"& thead tr th":{borderBottom:d},"& tfoot tr th, & tbody tr th":{borderTop:d},"& tbody tr td":{padding:`${(0,a.a)({size:o,sizes:e.spacing})} ${(0,a.a)({size:r,sizes:e.spacing})}`,borderTop:d,fontSize:(0,a.a)({size:n,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:s?d:"none","&:last-of-type":{borderRight:"none",borderLeft:s?d:"none"}},"& tbody tr th":{borderRight:s?d:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[1]})})}}),m=r(64523),g=Object.defineProperty,x=Object.defineProperties,y=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,Table_defNormalProp=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Table_spreadValues=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&Table_defNormalProp(e,r,t[r]);if(b)for(var r of b(t))_.call(t,r)&&Table_defNormalProp(e,r,t[r]);return e},Table_spreadProps=(e,t)=>x(e,y(t)),__objRest=(e,t)=>{var r={};for(var o in e)j.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&b)for(var o of b(e))0>t.indexOf(o)&&_.call(e,o)&&(r[o]=e[o]);return r};let w={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},v=(0,o.forwardRef)((e,t)=>{let r=(0,n.N4)("Table",w,e),{className:l,children:i,striped:a,highlightOnHover:s,captionSide:d,horizontalSpacing:c,verticalSpacing:p,fontSize:h,unstyled:u,withBorder:g,withColumnBorders:x,variant:y}=r,b=__objRest(r,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:j,cx:_}=f({captionSide:d,verticalSpacing:p,horizontalSpacing:c,fontSize:h,withBorder:g,withColumnBorders:x},{unstyled:u,name:"Table",variant:y});return o.createElement(m.x,Table_spreadProps(Table_spreadValues({},b),{component:"table",ref:t,className:_(j.root,l),"data-striped":a||void 0,"data-hover":s||void 0}),i)});v.displayName="@mantine/core/Table"},2065:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/model",function(){return r(94618)}])},918:function(e,t,r){"use strict";r.d(t,{Z:function(){return CopyToClipboard}});var o=r(85893),n=r(67294),l=r(55652),i=r(69876),a=r(95117),s=r(49834),d=r(88198),c=r(93625),p=r(90589),h=r.n(p);function CopyToClipboard(e){let{value:t,content:r,truncate:p,width:u=300}=e,f=function(){let{timeout:e=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,r]=(0,n.useState)(null),[o,l]=(0,n.useState)(!1),[i,a]=(0,n.useState)(null),handleCopyResult=t=>{clearTimeout(i),a(setTimeout(()=>l(!1),e)),l(t)};return{copy:e=>{if("clipboard"in navigator)navigator.clipboard.writeText(e).then(()=>handleCopyResult(!0)).catch(e=>r(e));else{let t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-999999px",document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}finally{t.remove(),handleCopyResult(!0)}}},reset:()=>{l(!1),r(null),clearTimeout(i)},error:t,copied:o}}({timeout:500});return(0,o.jsx)(l.u,{label:f.copied?"已复制":"复制",withArrow:!0,position:"right",children:(0,o.jsxs)(i.k,{onClick:()=>f.copy(t),mih:50,style:{width:u},gap:"xs",justify:"flex-start",align:"center",direction:"row",wrap:"nowrap",children:[r?(0,o.jsx)(a.x,{truncate:p,className:h()["copy-to-clipboard-content"],children:r}):null,(0,o.jsx)(s.A,{color:f.copied?"teal":"gray",children:f.copied?(0,o.jsx)(d.Z,{size:"1rem"}):(0,o.jsx)(c.Z,{size:"1rem"})})]})})}},2394:function(e,t,r){"use strict";r.d(t,{Z:function(){return FeatureDescription}});var o=r(85893),n=r(92716),l=r(95117),i=r(64523),a=r(69876),s=r(19236),d=r(91759);function InfoDetail(e){let{detail:t,title:r}=e,[i,{open:a,close:s}]=(0,d.q)(!1);return(0,o.jsx)(o.Fragment,{children:t?(0,o.jsxs)("div",{children:[(0,o.jsx)(n.d,{opened:i,onClose:s,title:r,children:(0,o.jsx)(l.x,{children:t})}),(0,o.jsx)(l.x,{onClick:()=>a(),children:"信息"})]}):null})}function FeatureDescription(e){let{title:t,description:r,detail:n,mt:d,mb:c}=e;return(0,o.jsxs)(i.x,{mt:d||24,mb:c||24,children:[(0,o.jsxs)(a.k,{mih:20,gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",children:[(0,o.jsx)(s.D,{order:2,children:t}),(0,o.jsx)(InfoDetail,{title:t,detail:n})]}),r?(0,o.jsx)(l.x,{lineClamp:4,children:r}):null]})}},94618:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return IndexPage}});var o=r(85893),n=r(67294),l=r(95117),i=r(95033),a=r(67841),s=r(64523),d=r(49737),c=r(95078),p=r(94491),h=r(80061),u=r(73193),f=r(14127),m=r(52615),g=r(54685),x=r(93284),y=r(77248),b=r(73344),j=r(91939),_=r(25288),w=r(918),v=r(86105),k=r(2394);function List(){let e=(0,j.s6)().modelList,t=(0,j.s6)().loading,r=(0,j.s6)().setLoading,p=(0,j.s6)().setOpen,h=(0,j.s6)().setEditStatus,u=(0,j.s6)().updateCurrentModel,removeModel=e=>{let{id:t,name:n}=e;b.qk.openConfirmModal({title:"删除LLM代理",centered:!0,children:(0,o.jsx)(l.x,{size:"sm",children:(0,o.jsx)(i.y,{highlight:n,children:"确定删除 ".concat(n,"?")})}),labels:{confirm:"确定",cancel:"取消"},onCancel:()=>console.log("Cancel"),confirmProps:{color:"red"},onConfirm:async()=>{try{r(!0),await (0,j.$s)(t),await (0,j.fZ)()}catch(e){console.log(e)}finally{r(!1)}}})},getModels=async()=>{r(!0),await (0,j.fZ)(),r(!1)},f=e.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.id}),(0,o.jsx)("td",{children:e.name_alias}),(0,o.jsx)("td",{children:e.name}),(0,o.jsx)("td",{children:e.description}),(0,o.jsx)("td",{style:{width:450},children:(0,o.jsx)(w.Z,{value:e.url,content:e.url})}),(0,o.jsx)("td",{style:{width:200},children:e.token?(0,o.jsx)(w.Z,{value:e.token,content:"******************",width:100}):null}),(0,o.jsx)("td",{children:(0,_.o0)(e.created)}),(0,o.jsx)("td",{children:(0,_.o0)(e.modified)}),(0,o.jsxs)("td",{style:{width:180},children:[" ",(0,o.jsx)(a.z,{variant:"filled",size:"xs",onClick:()=>{h(!0),u(e),p(!0)},mr:4,children:"修改"}),(0,o.jsx)(a.z,{variant:"filled",color:"red",size:"xs",onClick:()=>removeModel(e),children:"删除"})]})]},e.id));return(0,n.useEffect)(()=>{getModels()},[]),(0,o.jsxs)(s.x,{pos:"relative",children:[(0,o.jsx)(d.f,{visible:t,overlayOpacity:.3}),(0,o.jsxs)(c.i,{striped:!0,withBorder:!0,withColumnBorders:!0,mt:12,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"编号"}),(0,o.jsx)("th",{children:"LLM代理名称"}),(0,o.jsx)("th",{children:"基础模型名称"}),(0,o.jsx)("th",{children:"描述"}),(0,o.jsx)("th",{children:"LLM服务访问地址"}),(0,o.jsx)("th",{children:"访问token"}),(0,o.jsx)("th",{children:"创建时间"}),(0,o.jsx)("th",{children:"修改时间"}),(0,o.jsx)("th",{children:"操作"})]})}),(0,o.jsx)("tbody",{children:f})]})]})}function AddOrUpdate(){let e=(0,j.s6)().open,t=(0,j.s6)().isEdit,r=(0,j.s6)().setEditStatus,l=(0,j.s6)().setOpen,i=(0,j.s6)().setLoading,d=(0,j.s6)().currentModel,c={name:"",name_alias:"",url:"",token:"",timeout:v.t5,description:""},g=(0,y.c)({initialValues:c,validate:{name:e=>e?null:"名称必填",name_alias:e=>e?null:"模型别名必填",url:e=>/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)?null:"请输入合法的访问地址"}});return(0,n.useEffect)(()=>{t&&g.setValues({name:(null==d?void 0:d.name)||"",name_alias:(null==d?void 0:d.name_alias)||"",url:(null==d?void 0:d.url)||"",token:(null==d?void 0:d.token)||"",timeout:(null==d?void 0:d.timeout)||v.t5,description:(null==d?void 0:d.description)||""})},[d]),(0,o.jsxs)(p.u,{opened:e,onClose:()=>{l(!1)},title:t?"修改LLM代理":"创建LLM代理",centered:!0,children:[(0,o.jsxs)(s.x,{maw:640,mx:"auto",children:[(0,o.jsx)(h.o,{withAsterisk:!0,label:"LLM代理名",placeholder:"",...g.getInputProps("name_alias"),description:"LLM代理的名称"}),(0,o.jsx)(h.o,{withAsterisk:!0,label:"模型名",placeholder:"",...g.getInputProps("name"),description:"基础模型服务需要的模型参数，通过LLM代理透传给基础模型服务，比如访问千问的模型明示qwen-plus或qwen-turbo"}),(0,o.jsx)(h.o,{withAsterisk:!0,label:(0,o.jsxs)("span",{children:["基础模型服务访问地址",(0,o.jsx)("a",{href:"/foundationModel/create",target:"_blank",children:"还没有基础模型服务？去创建"})]}),placeholder:"",...g.getInputProps("url"),description:"基础模型服务原始地址，可以通过基础模型菜单访问创建,创建成功后粘贴基础模服务访问地址在此"}),(0,o.jsx)(u.W,{label:"LLM服务访问token",placeholder:"",...g.getInputProps("token"),description:"当你访问的服务需要透传token，比如openai 的chatgpt，在这里填写，默认情况下可以不填写"}),(0,o.jsx)(f.Y,{label:"访问超时时间(s)",placeholder:"",...g.getInputProps("timeout"),description:"AgentCraft访问基础模型服务的超时时间"}),(0,o.jsx)(m.g,{label:"描述",placeholder:"输入数据集描述",...g.getInputProps("description")})]}),(0,o.jsx)(s.x,{maw:640,mx:"auto",pt:12,style:{textAlign:"right"},children:(0,o.jsx)(a.z,{onClick:async()=>{if(g.validate(),g.isValid())try{i(!0),t?await (0,j.QB)(null==d?void 0:d.id,g.values):await (0,j.mS)(g.values),await (0,j.fZ)(),l(!1),g.reset()}catch(e){console.log(e)}finally{r(!1),i(!1)}},children:"确认"})})]})}function ModelPage(){let e=[{title:"AgentCraft",href:"#"},{title:"LLM代理",href:"/model"}].map((e,t)=>(0,o.jsx)(g.e,{href:e.href,children:e.title},t)),t=(0,j.s6)().setOpen,r=(0,j.s6)().setEditStatus;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x.O,{children:e}),(0,o.jsx)(k.Z,{title:"LLM代理",description:"AgentCraft的LLM代理是基于基础大语言模型服务比如通义千问等构建出的一个代理层服务，主要是为了抹平不同模型服务之间的接口数据差异，方便在业务中快速切换更加适合的模型服务"}),(0,o.jsx)(s.x,{mt:12,children:(0,o.jsx)(a.z,{onClick:()=>{r(!1),t(!0)},children:"新建LLM代理"})}),(0,o.jsx)(AddOrUpdate,{}),(0,o.jsx)(List,{})]})}function IndexPage(){return(0,o.jsx)(ModelPage,{})}},91939:function(e,t,r){"use strict";r.d(t,{$s:function(){return deleteModel},QB:function(){return updateModel},fZ:function(){return getModelList},mS:function(){return addModel},s6:function(){return i}});var o=r(64529),n=r(782),l=r(23824);let i=(0,o.Ue)()((0,n.mW)(e=>({modelList:[],loading:!1,open:!1,isEdit:!1,updateCurrentModel:t=>e(e=>({currentModel:t})),setEditStatus:t=>e(e=>({isEdit:t})),setLoading:t=>e(e=>({loading:t})),setOpen:t=>e(e=>({open:t})),updateModelList:t=>e(e=>({modelList:t}))})));async function getModelList(){let e=i.getState(),t=e.updateModelList,r=await (0,l.W)("/api/model/list"),o=await r.data;o&&t(o)}async function deleteModel(e){return await (0,l.W)("/api/model/delete?id=".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})}async function addModel(e){return await (0,l.W)("/api/model/create",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}async function updateModel(e,t){return await (0,l.W)("/api/model/update?id=".concat(e),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}},90589:function(e){e.exports={"copy-to-clipboard-content":"CopyToClipboard_copy-to-clipboard-content__cxI0e"}}},function(e){e.O(0,[871,754,322,774,888,179],function(){return e(e.s=2065)}),_N_E=e.O()}]);